[tool.poetry.scripts]
compare-leximpact = "notebooks.survey_scenario.modules.comparison:compare"

[tool.poetry.group.dev.dependencies]
pydocstyle = "^6.3.0"

[tool.poetry]
name = "leximpact_prepare_data"
version = "0.1.3"
description = "Prepare data for LexImpact"
authors = ["LexImpact <leximpact@an.fr>"]
license = "AGPL-3.0"
readme = "README.md"
homepage = "https://leximpact.an.fr/"
repository = "https://git.leximpact.dev/leximpact/leximpact-prepare-data"


[tool.poetry.dependencies]
python = ">=3.10,<4.0"
leximpact-common-python-libraries = "^0.1.1"
pandas = ">=2.0.3,<3.0"
# A list of all of the optional dependencies, some of which are included in the
# below `extras`. They can be opted into by apps.
scikit-learn = { version = "^1.0.1", optional = true}
vaex-core = { version = "^4.8.0", optional = true}
tables = { version = "^3.6.1", optional = true}
diagrams = { version = "^0.20.0", optional = true}
python-dotenv = {version = "^0.19.2", optional = true}  # for vaex
vaex-server = "^0.8.1"
vaex-jupyter = "^0.7.0"
leximpact-survey-scenario = "^1.0.1"
#leximpact-survey-scenario =  {git = "https://git.leximpact.dev/leximpact/simulateur-socio-fiscal/budget/leximpact-survey-scenario.git", rev="master"}
leximpact-aggregates = "^0.0.28"
multipledispatch = "^0.6.0"
nbdev = "^2.2.10"
pyarrow = "6.0.1"  # Ugly fix for https://github.com/huggingface/datasets/issues/3310
ipdb = "^0.13.13"
kaleido = "0.2.1"
markupsafe = "2.0.1"
itsdangerous = "2.0.1"
numexpr = "2.8.4"
pydantic = "^1.10.8" # https://github.com/vaexio/vaex/issues/2384

# # end of comparator needs
werkzeug = "2.0.1"
pip = "^23.2"
pypandoc = "^1.11"
dtale = "^3.3.0"
openfisca-survey-manager = "^2.0.0"

[tool.poetry.dev-dependencies]
seaborn = "^0.11.1"
jupyter = "^1.0.0"
jupyterlab = "^3.2.8"
ipykernel = "^6.2.0"
lab = "^6.4"
# pytest = "^5.2" TirÃ© par OpenFisca-France-Data
papermill = "^2.3.3"
plotly = "^5.4.0"
xlrd = "^2.0.1"  # For Excel
openpyxl = "^3.0.9"  # For Excel
nbdev = "^2.0.0"
# markupsafe = "2.0.1" # For NBDev : https://github.com/pallets/markupsafe/issues/284
pre-commit = "^2.17.0"
nbqa = ">=1.2.3"
flake8 = ">=3.9.0"
black = ">=21.5b1"
toml = "^0.10.2"

[tool.poetry_bumpversion.file."leximpact_prepare_data/__init__.py"]
[tool.poetry_bumpversion.file."settings.ini"]
[tool.poetry_bumpversion.file.".conda/meta.yaml"]

[tool.poetry.extras]
pipeline = ["scikit-learn", "diagrams", "vaex-core", "tables", "python-dotenv"]


[tool.poetry.group.voila.dependencies]
voila = "^0.4.0"

[tool.black]
target-version = ['py39']
exclude = '''
/(
    \.git
  | __pycache__
  | \.tox
  | \.venv
  | build
  | dist
  | docs
  | notes
  | openfisca-france-data
)/
'''

[tool.isort]
profile = "black"
multi_line_output = 3
skip_glob = [ "docs" ]

[tool.ruff]
ignore = ["E501", "E402"]

[tool.nbqa.addopts]
ruff = [
"--extend-ignore=F405,F821,F403,F811"
]

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

