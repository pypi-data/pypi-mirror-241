"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[3255],{28121:function(e,n,t){t.d(n,{Z:function(){return u}});t(72791);var i=t(5574),r=t(65661),a=t(39157),o=t(51691),s=t(97123),l=t(24518),d=t(80184);function u(e){var n=e.id,t=e.open,u=e.onOk,c=e.onCancel,x=e.title,h=e.text;return(0,d.jsxs)(i.Z,{title:x||"Logged Out",open:t,onCancel:c,children:[(0,d.jsx)(r.Z,{id:"delete-modal-title",children:"Confirm Delete"}),(0,d.jsx)(a.Z,{children:(0,d.jsx)(o.Z,{children:h})}),(0,d.jsxs)(s.Z,{children:[(0,d.jsx)(l.Z,{onClick:function(){return c(n)},children:"Cancel"},"cancel"),",",(0,d.jsx)(l.Z,{variant:"contained",type:"primary",onClick:function(){return u(n)},children:"Confirm"},"submit"),","]})]})}},60142:function(e,n,t){t.d(n,{P:function(){return r},l:function(){return a}});var i=t(80184);function r(e){var n=new Date(e.value);return(0,i.jsx)("span",{children:n.toLocaleString()})}function a(e){for(var n=e.value,t=["","K","M","G","T","P","E","Z","Y"],r=0;n>=1024;)n/=1024,r+=1;return(0,i.jsx)("span",{children:n>0?n.toFixed(2)+" "+t[r]:n+" "+t[r]})}},93255:function(e,n,t){t.r(n),t.d(n,{default:function(){return ie}});var i=t(93433),r=t(1413),a=t(29439),o=t(72791),s=t(81918),l=t(64554),d=t(20068),u=t(13400),c=t(89164),x=t(94070),h=t(47317),f=t(79836),p=t(56890),Z=t(35855),j=t(53994),v=t(53382),y=t(20890),m=t(61889),g=t(24518),k=t(56125),S=t(13239),b=t(16088),C=t(8253),w=t(74156),_=t(90519),D=t(29013),O=t(66510),E=t(73495),A=t(40870),z=t(80202),N=t(23623),M=t(75330),P=t(12705),L=t(40406),T=t(28121),W=t(5574),I=t(65661),U=t(39157),B=t(36314),F=t(58406),H=t(23786),R=t(97123),V=t(7077),J=t(80184);function Y(e){var n=e.id,t=e.open,i=e.onOk,r=e.onCancel,s=e.title,l=e.dataSource,d=o.useState(null===l||void 0===l?void 0:l.visibility),u=(0,a.Z)(d,2),c=u[0],x=u[1];return(0,J.jsxs)(W.Z,{open:t,onClose:function(){return r(n)},"aria-labelledby":"share-datasource-dialog-title","aria-describedby":"share-datasource-dialog-description",children:[(0,J.jsx)(I.Z,{id:"share-datasource-dialog-title",children:s}),(0,J.jsx)(U.Z,{style:{minWidth:"500px"},children:(0,J.jsxs)(B.Z,{spacing:2,children:[(0,J.jsx)("h4",{children:"Choose who can access this datasource"}),(0,J.jsx)(F.Z,{labelId:"share-datasource-select-label",size:"small",defaultValue:void 0===(null===l||void 0===l?void 0:l.visibility)?1:null===l||void 0===l?void 0:l.visibility,onChange:function(e){x(e.target.value)},children:[{value:1,label:"Organization",description:"Members of your organization can access this datasource"},{value:0,label:"You",description:"Only you can access this datasource"}].map((function(e){return(0,J.jsx)(H.Z,{value:e.value,children:(0,J.jsxs)(B.Z,{direction:"row",spacing:1,children:[(0,J.jsx)("span",{children:e.label}),(0,J.jsx)("small",{children:e.description})]})},e.value)}))})]})}),(0,J.jsxs)(R.Z,{children:[(0,J.jsx)(g.Z,{onClick:function(){return r(n)},children:"Cancel"}),(0,J.jsx)(g.Z,{variant:"contained",onClick:function(){return function(){var e="noop";c!==l.visibility?0===l.visibility&&1===c?(0,V.o)().post("api/org/datasources/".concat(l.uuid,"/add_entry")).then((function(n){i(e,l)})):1===l.visibility&&0===c?(0,V.o)().delete("api/org/datasources/".concat(l.uuid)).then((function(n){i(e,l)})):i(e,l):i(e,l)}()},children:"Done"})]})]})}var G=t(9953),K=t(94721),X=t(71747);var q=function(e){var n=e.onCancel,t=e.dataSourceEntry,i=e.open,r=(0,o.useState)(null),d=(0,a.Z)(r,2),u=d[0],c=d[1],x=(0,o.useState)(null),h=(0,a.Z)(x,2),f=h[0],p=h[1],Z=(0,o.useState)(!1),j=(0,a.Z)(Z,2),v=j[0],y=j[1];return(0,o.useEffect)((function(){var e,n;null!==t&&void 0!==t&&null!==(e=t.config)&&void 0!==e&&e.document_ids?(0,V.o)().get("/api/datasource_entries/".concat(t.uuid,"/text_content")).then((function(e){var n,t;c((0,J.jsx)(X.u,{value:null===(n=e.data)||void 0===n?void 0:n.content,disabled:!0,autoSize:!0,style:{maxHeight:"80vh",width:"100%",overflow:"auto"}})),p(null===(t=e.data)||void 0===t?void 0:t.metadata)})).finally((function(){return y(!1)})):c((0,J.jsx)(X.u,{value:JSON.stringify(null===t||void 0===t||null===(n=t.config)||void 0===n?void 0:n.errors),disabled:!0,autoSize:!0,style:{maxHeight:"80vh",width:"100%",overflow:"auto"}}))}),[t]),(0,J.jsx)(G.ZP,{open:i,onClose:n,anchor:"right",sx:{"& .MuiDrawer-paper":{minWidth:"40%"},maxWidth:"40%"},children:(0,J.jsxs)(l.Z,{children:[(0,J.jsxs)(B.Z,{direction:"row",gap:1,sx:{mb:"10px",mt:"10px"},children:[(0,J.jsx)(g.Z,{onClick:function(){return n()},sx:{alignSelf:"left"},children:"X"}),Object.keys(f||{}).map((function(e){return(0,J.jsx)(s.Z,{label:"".concat(e,": ").concat(f[e]),size:"small",sx:{borderRadius:"10px",marginTop:"5px"}},e)}))]}),(0,J.jsx)(K.Z,{}),v?(0,J.jsx)(S.Z,{}):(0,J.jsx)("div",{style:{margin:"0px 10px"},children:u})]})})},Q=t(60142),$=t(52803),ee=t(72426),ne=t.n(ee);function te(e){var n=e.dataSourceEntryData,t=(0,o.useState)(!1),i=(0,a.Z)(t,2),r=i[0],y=i[1],m=(0,o.useState)(null),g=(0,a.Z)(m,2),k=g[0],S=g[1],b=(0,o.useState)(!1),D=(0,a.Z)(b,2),O=D[0],E=D[1],A=(0,$.lD)(),z=[{title:"Name",key:"name"},{title:"Size",key:"size",render:function(e){return(0,J.jsx)(Q.l,{value:e})}},{title:"Status",key:"status",render:function(e,n){var t="success";return t="FAILED"===e?"error":"READY"===e?"success":"info",(0,J.jsx)(s.Z,{color:t,style:{cursor:"pointer"},label:n.status.charAt(0)+n.status.slice(1).toLowerCase(),size:"small"},n.uuid)}},{title:"Created At",key:"created_at",render:function(e){return(0,J.jsx)(Q.P,{value:e})}},{title:"Last Modified",key:"updated_at",render:function(e){return ne()(e).fromNow()}},{title:"Action",key:"operation",render:function(e,n){var t=null===e||void 0===e?void 0:e.sync_config;return(0,J.jsxs)(l.Z,{children:[(0,J.jsx)(d.Z,{title:"View Contents",children:(0,J.jsx)(u.Z,{onClick:function(){y(!0),S(n)},children:(0,J.jsx)(C.Z,{})})}),t&&(0,J.jsx)(d.Z,{title:"Sync Contents",children:(0,J.jsx)(u.Z,{children:(0,J.jsx)(w.Z,{})})}),(0,J.jsx)(d.Z,{title:"Delete Entry",children:(0,J.jsx)(u.Z,{onClick:function(){S(n),E(!0)},children:(0,J.jsx)(_.Z,{})})})]})}}];return 0===n.length?(0,J.jsx)(c.Z,{children:(0,J.jsxs)(x.Z,{severity:"info",sx:{maxWidth:"300px",margin:"0 auto"},children:[(0,J.jsx)(h.Z,{children:"No entries found"}),"Click on the ",(0,J.jsx)("strong",{children:"+"})," icon to add a new entry."]})}):(0,J.jsxs)(f.Z,{stickyHeader:!0,"aria-label":"sticky table contents",colSpan:7,children:[(0,J.jsx)(p.Z,{children:(0,J.jsx)(Z.Z,{children:z.map((function(e){return(0,J.jsx)(j.Z,{sx:{padding:"5px 16px"},children:(0,J.jsx)("strong",{children:e.title})},e.key)}))})}),(0,J.jsx)(v.Z,{sx:{borderBottom:"none"},children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,J.jsx)(Z.Z,{role:"checkbox",tabIndex:-1,children:z.map((function(n){var t=e[n.key];return(0,J.jsx)(j.Z,{sx:{padding:"0 16px"},children:n.render?n.render(t,e):t},n.key)}))},e.uuid)}))}),(0,J.jsx)(q,{onCancel:function(){return y(!1)},dataSourceEntry:k,open:r}),(0,J.jsx)(T.Z,{id:k,title:"Delete Data Source Entry",text:(0,J.jsxs)("div",{children:["Are you sure you want to delete"," ",(0,J.jsx)("span",{style:{fontWeight:"bold"},children:null===k||void 0===k?void 0:k.name})," ","?"]}),open:O,onOk:function(e){(0,V.o)().delete("api/datasource_entries/".concat(e.uuid)).then((function(e){A(),E(!1)}))},onCancel:function(){E(!1)}})]})}function ie(){var e=(0,o.useState)(1),n=(0,a.Z)(e,2),t=n[0],s=n[1],c=(0,o.useState)(""),x=(0,a.Z)(c,2),h=x[0],C=x[1],w=(0,o.useState)(""),W=(0,a.Z)(w,2),I=W[0],U=W[1],B=(0,o.useState)(null),F=(0,a.Z)(B,2),H=F[0],R=F[1],G=(0,o.useState)(!1),K=(0,a.Z)(G,2),X=K[0],q=K[1],ee=(0,o.useState)(!1),ie=(0,a.Z)(ee,2),re=ie[0],ae=ie[1],oe=(0,o.useState)(!1),se=(0,a.Z)(oe,2),le=se[0],de=se[1],ue=(0,M.sJ)(P.ye),ce=(0,M.FV)(P.MC),xe=(0,a.Z)(ce,2),he=xe[0],fe=xe[1],pe=(0,M.FV)(P.DK),Ze=(0,a.Z)(pe,2),je=Ze[0],ve=Ze[1],ye=(0,o.useState)(null),me=(0,a.Z)(ye,2),ge=me[0],ke=me[1],Se=(0,o.useState)([]),be=(0,a.Z)(Se,2),Ce=be[0],we=be[1],_e=(0,o.useState)("Add New Data Source"),De=(0,a.Z)(_e,2),Oe=De[0],Ee=De[1],Ae=(0,o.useState)(null),ze=(0,a.Z)(Ae,2),Ne=ze[0],Me=ze[1],Pe=(0,o.useState)(null),Le=(0,a.Z)(Pe,2),Te=Le[0],We=Le[1],Ie=(0,$.lD)(),Ue=(0,$.B6)(),Be=(0,M.sJ)(P.Dg);(0,o.useEffect)((function(){ue.length>0&&we((function(e){return ue.map((function(n){var t;return(0,r.Z)((0,r.Z)({},n),{},{expand:(null===(t=e.find((function(e){return e.uuid===n.uuid})))||void 0===t?void 0:t.expand)||!1})}))}))}),[ue]);var Fe=[{title:"Name",key:"name",render:function(e,n){return(0,J.jsxs)(y.Z,{sx:{display:"flex"},children:[n.expand?(0,J.jsx)(D.Z,{}):(0,J.jsx)(O.Z,{}),e]})}},{title:"Owner",key:"owner_email",render:function(e,n){return(0,J.jsx)("span",{children:n.isUserOwned?"me":n.owner_email})}},{title:"Data Source Type",key:"type",render:function(e){return(0,J.jsx)("span",{children:e.name})}},{title:"Size",key:"size",render:function(e){return(0,J.jsx)(Q.l,{value:e})}},{title:"Created At",key:"created_at",render:function(e){return(0,J.jsx)(Q.P,{value:e})}},{title:"Last Modified",key:"updated_at",render:function(e){return ne()(e).fromNow()}},{title:"Action",key:"operation",render:function(e,n){var t,i;return(0,J.jsxs)(l.Z,{children:[!(null!==e&&void 0!==e&&null!==(t=e.type)&&void 0!==t&&t.is_external_datasource)&&(0,J.jsx)(u.Z,{disabled:!n.isUserOwned,onClick:function(){Ee("Add New Data Entry"),Me(n),q(!0)},children:(0,J.jsx)(E.Z,{})}),(null===n||void 0===n||null===(i=n.type)||void 0===i?void 0:i.is_external_datasource)&&(0,J.jsx)(d.Z,{title:"External Connection",children:(0,J.jsx)("span",{children:(0,J.jsx)(u.Z,{disabled:!0,children:(0,J.jsx)(A.Z,{})})})}),(0,J.jsx)(u.Z,{disabled:!n.isUserOwned,onClick:function(){R(n),C("Delete Data Source"),U((0,J.jsxs)("div",{children:["Are you sure you want to delete"," ",(0,J.jsx)("span",{style:{fontWeight:"bold"},children:n.name})," ?"]})),ae(!0)},children:(0,J.jsx)(_.Z,{})}),Be.IS_ORGANIZATION_MEMBER&&n.isUserOwned&&(0,J.jsx)(u.Z,{onClick:function(){Ee("Share Datasource"),Me(n),de(!0)},children:0===n.visibility?(0,J.jsx)(z.Z,{}):(0,J.jsx)(N.Z,{})})]})}}];return(0,J.jsxs)("div",{id:"data-page",style:{marginBottom:"120px"},children:[(0,J.jsxs)(m.ZP,{span:24,style:{padding:"10px"},children:[(0,J.jsx)(m.ZP,{item:!0,style:{width:"100%",padding:"15px 0px"},children:(0,J.jsx)(g.Z,{onClick:function(){q(!0)},type:"primary",variant:"contained",sx:{float:"left",marginBottom:"10px",textTransform:"none"},children:"Add Data Source"})}),(0,J.jsxs)(m.ZP,{item:!0,style:{width:"100%"},children:[(0,J.jsxs)(f.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,J.jsx)(p.Z,{children:(0,J.jsx)(Z.Z,{children:Fe.map((function(e){return(0,J.jsx)(j.Z,{sx:{paddingLeft:"name"===e.key?"40px":"inherit"},children:(0,J.jsx)("strong",{children:e.title})},e.key)}))})}),(0,J.jsx)(v.Z,{children:Ce.slice(10*(t-1),10*t).map((function(e,n){return[[(0,J.jsx)(Z.Z,{hover:!0,sx:{cursor:"pointer",backgroundColor:e.expand?"#f5f5f5":"inherit"},onClick:function(){!function(e){we(Ce.map((function(n){return n.uuid===e.uuid&&(n.expand=!n.expand),n}))),ke(!0),We(e.uuid);var n="/api/datasources/".concat(e.uuid,"/entries");e.isUserOwned||(n="/api/org/datasources/".concat(e.uuid,"/entries")),(0,V.o)().get(n).then((function(n){e.isUserOwned?fe([].concat((0,i.Z)(he.filter((function(n){return n.datasource.uuid!==e.uuid}))),(0,i.Z)(n.data))):ve([].concat((0,i.Z)(je.filter((function(n){return n.datasource.uuid!==e.uuid}))),(0,i.Z)(n.data)))})).finally((function(){ke(null)}))}(e)},children:Fe.map((function(n){var t=e[n.key];return(0,J.jsx)(j.Z,{sx:{fontWeight:e.expand?"bold":"inherit"},children:n.render?n.render(t,e):t},n.key)}))},e.uuid),(0,J.jsx)(Z.Z,{children:(0,J.jsx)(j.Z,{colSpan:7,sx:{padding:e.expand?"0":"inherit"},children:(0,J.jsx)(k.Z,{in:e.expand,timeout:"auto",unmountOnExit:!0,children:(0,J.jsx)(l.Z,{sx:{margin:1},children:ge&&Te===e.uuid?(0,J.jsx)(S.Z,{}):(0,J.jsx)(te,{dataSourceEntryData:e.data_source_entries||[]})})})})},"".concat(e.uuid,"_details"))]]}))})]}),(0,J.jsx)(b.Z,{count:Math.ceil(Ce.length/10),variant:"outlined",shape:"rounded",page:t,onChange:function(e,n){s(n)},sx:{marginTop:2,float:"right"}})]})]}),X&&(0,J.jsx)(L.P,{open:X,handleCancelCb:function(){Me(null),q(!1)},dataSourceAddedCb:function(){Me(null),Ie(),Ue(),q(!1)},modalTitle:Oe,datasource:Ne}),re&&(0,J.jsx)(T.Z,{id:H,title:h,text:I,open:re,onOk:function(e){void 0!==(null===e||void 0===e?void 0:e.data_source_entries)&&(0,V.o)().delete("api/datasources/".concat(e.uuid)).then((function(e){Ue(),ae(!1)}))},onCancel:function(){ae(!1)}}),le&&(0,J.jsx)(Y,{title:Oe,onCancel:function(){return de(!1)},onOk:function(){de(!1)},open:le,dataSource:Ne})]})}}}]);
//# sourceMappingURL=3255.309cdc28.chunk.js.map