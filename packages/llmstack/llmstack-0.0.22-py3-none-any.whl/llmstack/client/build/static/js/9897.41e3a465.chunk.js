"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[9897],{7077:function(e,n,t){t.d(n,{o:function(){return i}});var o=t(31243),r=t(35552),i=function(){var e=o.Z.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"});return e.interceptors.response.use((function(e){return e}),(function(e){window.location.pathname.startsWith("/s/")||window.location.pathname.startsWith("/hub")||window.location.pathname.startsWith("/app/")||401!==e.response.status&&403!==e.response.status||(window.location.href="/login?redirectUrl="+window.location.pathname);try{(0,r.yv)("Error Occurred",{variant:"error"})}catch(n){}return Promise.reject(e)})),e}},39897:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var o=t(29439),r=t(72791),i=t(5574),a=t(65661),l=t(39157),s=t(51691),c=t(97123),u=t(24518),d=t(81918),p=t(64554),h=t(13400),f=t(61889),x=t(79836),j=t(56890),m=t(35855),b=t(53994),Z=t(53382),y=t(16088),k=t(7077),v=t(52601),g=t(63162),w=t(56638),C=t(35552),S=t(1413),J=t(2199),O=t(41),R=t(13208),A=t(35527),P=t(31378),T=t(25028),_=t(23786),D=t(26759),E=t(80184);function I(e){var n=e.options,t=e.sx,i=(0,r.useState)(!1),a=(0,o.Z)(i,2),l=a[0],s=a[1],c=(0,r.useRef)(null),d=(0,r.useState)(1),p=(0,o.Z)(d,2),h=p[0],f=p[1],x=function(e){c.current&&c.current.contains(e.target)||s(!1)};return(0,E.jsxs)(r.Fragment,{children:[(0,E.jsxs)(J.Z,{variant:"contained",ref:c,"aria-label":"split button",sx:t,children:[(0,E.jsx)(u.Z,{onClick:function(){n[h].onClick()},children:n[h].title}),(0,E.jsx)(u.Z,{size:"small","aria-controls":l?"split-button-menu":void 0,"aria-expanded":l?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:function(){s((function(e){return!e}))},children:(0,E.jsx)(D.Z,{})})]}),(0,E.jsx)(O.Z,{sx:{zIndex:50},open:l,anchorEl:c.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,o=e.placement;return(0,E.jsx)(R.Z,(0,S.Z)((0,S.Z)({},t),{},{style:{transformOrigin:"bottom"===o?"center top":"center bottom"},children:(0,E.jsx)(A.Z,{children:(0,E.jsx)(P.Z,{onClickAway:x,children:(0,E.jsx)(T.Z,{id:"split-button-menu",autoFocusItem:!0,children:n.map((function(e,t){return(0,E.jsx)(_.Z,{disabled:!0===(null===n||void 0===n?void 0:n.isDisabled),selected:t===h,onClick:function(e){return function(e,n){f(n),s(!1)}(0,t)},children:e.title},e.key)}))})})})}))}})]})}function W(e){var n=e.open,t=e.onOk,o=e.onCancel,r=e.title,d=e.text;return(0,E.jsxs)(i.Z,{title:r||"Logged Out",open:n,onCancel:o,children:[(0,E.jsx)(a.Z,{id:"delete-modal-title",children:r}),(0,E.jsx)(l.Z,{children:(0,E.jsx)(s.Z,{children:d})}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(u.Z,{onClick:o,children:"Cancel"},"cancel"),",",(0,E.jsx)(u.Z,{variant:"contained",type:"primary",onClick:t,children:"Confirm"},"submit"),","]})]})}function F(e){var n=e.modalType,t=e.open,o=e.onCancel,r=e.onOk,i=e.jobId;switch(n){case"delete":return(0,E.jsx)(W,{id:"delete-job",open:t,onOk:function(){(0,k.o)().delete("/api/jobs/".concat(i)).then((function(e){window.location.reload()})).catch((function(e){(0,C.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Delete Job",text:"Are you sure you want to delete this job?"});case"pause":return(0,E.jsx)(W,{id:"pause-job",open:t,onOk:function(){(0,k.o)().post("/api/jobs/".concat(i,"/pause")).then((function(e){window.location.reload()})).catch((function(e){(0,C.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Pause Job",text:"Are you sure you want to pause this job?"});case"resume":return(0,E.jsx)(W,{id:"resume-job",open:t,onOk:function(){(0,k.o)().post("/api/jobs/".concat(i,"/resume")).then((function(e){window.location.reload()})).catch((function(e){(0,C.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Resume Job",text:"Are you sure you want to resume this job?"});default:return null}}function N(){var e=(0,r.useState)(1),n=(0,o.Z)(e,2),t=n[0],i=n[1],a=(0,r.useState)([]),l=(0,o.Z)(a,2),s=l[0],c=l[1],u=(0,r.useState)(!1),C=(0,o.Z)(u,2),S=C[0],J=C[1],O=(0,r.useState)(null),R=(0,o.Z)(O,2),A=R[0],P=R[1],T=(0,r.useState)(null),_=(0,o.Z)(T,2),D=_[0],W=_[1],N=function(){P(null),W(null),J(!1)},z=[{title:"Name",key:"name"},{title:"Type",key:"model",render:function(e,n){return(0,E.jsxs)("div",{children:[(0,E.jsx)(d.Z,{label:function(){switch(null===n||void 0===n?void 0:n.task_category){case"app_run":return"Application Run";case"datasource_refresh":return"Datasource Refresh";default:return null}}(),color:"primary"}),(0,E.jsx)(d.Z,{label:function(){switch(e){case"ScheduledJob":return"Scheduled Job";case"RepeatableJob":return"Repeatable Job";case"CronJob":return"Cron Job";default:return null}}(),color:"secondary"})]})}},{title:"Status",key:"enabled",render:function(e,n){return n?(0,E.jsx)(d.Z,{label:"Enabled",color:"success"}):(0,E.jsx)(d.Z,{label:"Disabled",color:"error"})}},{title:"Action",key:"operation",render:function(e,n){return(0,E.jsxs)(p.Z,{children:["ScheduledJob"!==(null===n||void 0===n?void 0:n.model)?null!==n&&void 0!==n&&n.enabled?(0,E.jsx)(h.Z,{onClick:function(){W(n.uuid),P("pause"),J(!0)},color:"primary",children:(0,E.jsx)(g.Z,{})}):(0,E.jsx)(h.Z,{onClick:function(){W(n.uuid),P("resume"),J(!0)},color:"primary",children:(0,E.jsx)(w.Z,{})}):null,(0,E.jsx)(h.Z,{onClick:function(){W(n.uuid),P("delete"),J(!0)},color:"primary",children:(0,E.jsx)(v.Z,{})})]})}}];return(0,r.useEffect)((function(){(0,k.o)().get("/api/jobs").then((function(e){c(e.data)}))}),[]),(0,E.jsxs)("div",{id:"schedule-page",style:{marginBottom:"120px"},children:[(0,E.jsxs)(f.ZP,{span:24,style:{padding:"10px"},children:[(0,E.jsx)(f.ZP,{item:!0,style:{width:"100%",padding:"15px 0px"},children:(0,E.jsx)(I,{options:[{key:1,title:"Application Run",onClick:function(){window.location.href="/schedule/add_app_run"}},{key:2,title:"Datasource Refresh",onClick:function(){window.location.href="/schedule/add_datasource_refresh"}}],sx:{float:"left",marginBottom:"10px",textTransform:"none"}})}),(0,E.jsxs)(f.ZP,{item:!0,style:{width:"100%"},children:[(0,E.jsxs)(x.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,E.jsx)(j.Z,{children:(0,E.jsx)(m.Z,{children:z.map((function(e){return(0,E.jsx)(b.Z,{sx:{paddingLeft:"name"===e.key?"40px":"inherit"},children:(0,E.jsx)("strong",{children:e.title})},e.key)}))})}),(0,E.jsx)(Z.Z,{children:s.map((function(e){return(0,E.jsx)(m.Z,{sx:{cursor:"pointer",backgroundColor:"inherit"},children:z.map((function(n){var t=e[n.key];return(0,E.jsx)(b.Z,{align:n.align,sx:{fontWeight:"inherit"},children:n.render?n.render(t,e):t},n.key)}))},e.uuid)}))})]}),s.length>0&&(0,E.jsx)(y.Z,{variant:"outlined",shape:"rounded",page:t,onChange:function(e,n){i(n)},sx:{marginTop:2,float:"right"}})]})]}),S&&(0,E.jsx)(F,{open:S,modalType:A,onCancel:N,jobId:D,onOk:N})]})}}}]);
//# sourceMappingURL=9897.41e3a465.chunk.js.map