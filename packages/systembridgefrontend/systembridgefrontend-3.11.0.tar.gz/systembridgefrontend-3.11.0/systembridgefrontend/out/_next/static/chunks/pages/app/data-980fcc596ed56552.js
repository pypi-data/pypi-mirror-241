(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{8792:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/data",function(){return s(7013)}])},1755:function(e,t,s){"use strict";s.d(t,{Z:function(){return Common_Layout}});var n=s(5893),i=s(7294),o=s(1163),r=s(9008),a=s.n(r),c=s(3946),l=s(8849),d=s(5317),h=s(8298),u=s(2734),p=s(2293),m=s(5582),y=s(155),x=s(6886),w=s(9417),g=s(5861),k=s(7357);function ElevationScroll(e){let{children:t}=e,s=(0,h.Z)({disableHysteresis:!0,threshold:24});return(0,i.cloneElement)(t,{elevation:s?4:0})}var Common_Header=function(){let[e,t]=(0,i.useState)(!1);(0,i.useCallback)(()=>{t(!e)},[e]);let s=(0,u.Z)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ElevationScroll,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{color:"transparent",elevation:0,children:(0,n.jsx)(m.Z,{maxWidth:"xl",sx:{padding:0},children:(0,n.jsx)(y.Z,{sx:{minHeight:50,maxHeight:50,padding:0,flex:1,alignItems:"center",justifyContent:"space-between",display:"flex",flexWrap:"nowrap"},children:(0,n.jsx)(x.ZP,{item:!0,children:(0,n.jsx)(w.Z,{href:"https://system-bridge.timmo.dev",target:"_blank",children:(0,n.jsx)(g.Z,{component:"div",variant:"h4",sx:{textTransform:"none",userSelect:"none",color:s.palette.primary.contrastText},children:"System Bridge"})})})})})}),(0,n.jsx)(k.Z,{sx:{height:s.spacing(18)}})]})})})};let b=!1;var Common_Layout=function(e){let t=(0,o.useRouter)();return(0,i.useEffect)(()=>{if(t.isReady&&!b){var e,s,n,i;b=!0;let o=(null===(e=t.query)||void 0===e?void 0:e.apiKey)||"",r=(null===(s=t.query)||void 0===s?void 0:s.apiPort)||"9170",a=!1;if((null===(n=t.query)||void 0===n?void 0:n.apiKey)||(a=!0,o=window.prompt("Please enter your API key",o)),(null===(i=t.query)||void 0===i?void 0:i.apiPort)||(a=!0,r=window.prompt("Please enter your API port (default: 9170)",r)),a&&o&&r){let e=t.asPath.split("?")[0];t.replace({pathname:e.includes(".html")?e:"".concat(e,".html"),query:{...t.query,apiKey:o,apiPort:r}})}}},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,n.jsx)("link",{rel:"canonical",href:e.url}),(0,n.jsx)("meta",{name:"description",content:e.description?"".concat(e.description):e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,n.jsx)("meta",{name:"keywords",content:e.keywords?"".concat(e.keywords):"system-bridge, system, bridge, typescript"})]}),!e.noHeader&&(0,n.jsx)(Common_Header,{}),e.closeButton&&(0,n.jsx)(c.Z,{size:"small",sx:{position:"absolute",top:4,right:4,zIndex:1e3},onClick:()=>{window.location.href="http://close.window"},children:(0,n.jsx)(l.Icon,{id:"close",path:d.r5M,size:1})}),e.children]})}},4103:function(e,t,s){"use strict";s.d(t,{C:function(){return WebSocketConnection}});let WebSocketConnection=class WebSocketConnection{close(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.close()}async connect(){let e=new WebSocket("ws://".concat(window.location.hostname||"localhost",":").concat(this.port,"/api/websocket"));return await new Promise(t=>{e.onopen=()=>t()}),e.onmessage=e=>{if("string"==typeof e.data){let t=JSON.parse(e.data);t&&this.onEvent&&this.onEvent(t)}},e}isConnected(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}getData(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Get data:",e),this.websocket.send(JSON.stringify({api_key:this.apiKey,event:"GET_DATA",modules:e})))}getSettings(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Get settings"),this.websocket.send(JSON.stringify({api_key:this.apiKey,event:"GET_SETTINGS"})))}registerDataListener(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Register data listener:",e),this.websocket.send(JSON.stringify({api_key:this.apiKey,event:"REGISTER_DATA_LISTENER",modules:e})))}sendPlayerStatus(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.send(JSON.stringify({api_key:this.apiKey,event:"MEDIA_STATUS",status:e}))}updateSetting(e,t){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Update setting:",{key:e,value:t}),this.websocket.send(JSON.stringify({api_key:this.apiKey,event:"UPDATE_SETTING",setting:e,value:t})))}constructor(e,t,s){this.port=e||9170,this.apiKey=t,(async()=>{this.websocket=await this.connect(),s&&this.websocket&&this.websocket.readyState===this.websocket.OPEN&&s()})()}}},7013:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return data}});var n=s(5893),i=s(7294),o=s(5582),r=s(1163),a=s(2734),c=s(6886),l=s(1703),d=s(44),h=s(8456),u=s(361),p=s.n(u),m=s(4103),y=s(4267),x=s(5861),w=s(2882),g=s(629),k=s(7906),b=s(3184),j=s(3816),f=s(3252),S=s(295),DataItems=function(e){let{name:t,data:s}=e,o=(0,i.useMemo)(()=>Object.entries(s).sort((e,t)=>{let[s]=e,[n]=t;return s.localeCompare(n)}),[s]),r=o.find(e=>{let[t,s]=e;return"last_updated"===t&&"object"==typeof s});return(0,n.jsxs)(y.Z,{children:[(0,n.jsx)(x.Z,{gutterBottom:!0,variant:"h4",component:"h3",children:t}),s?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(w.Z,{component:g.Z,children:(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(b.Z,{children:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(f.Z,{children:"Key"}),(0,n.jsx)(f.Z,{children:"Value"}),(0,n.jsx)(f.Z,{children:"Last Updated"})]})}),(0,n.jsx)(S.Z,{children:o.map((e,t)=>{let[s,i]=e;return"last_updated"!==s&&"object"!=typeof i&&(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(f.Z,{children:s}),(0,n.jsx)(f.Z,{children:i}),(0,n.jsx)(f.Z,{children:new Date((null==r?void 0:r[1][s])*1e3).toLocaleString()})]},t)})})]})})}):(0,n.jsx)(c.ZP,{container:!0,direction:"row",justifyContent:"center",children:(0,n.jsx)(h.Z,{})})]})};let v=["battery","cpu","disk","display","gpu","media","memory","network","processes","sensors","system"],Z={battery:"Battery",cpu:"CPU",disk:"Disk",display:"Display",gpu:"GPU",media:"Media",memory:"Memory",network:"Network",processes:"Processes",sensors:"Sensors",system:"System"},E={battery:{},cpu:{},disk:{},media:{},memory:{},network:{},processes:{},sensors:{},system:{}};var Data=function(){let[e,t]=(0,i.useState)(E),[s,o]=(0,i.useState)(!1),[u,y]=(0,i.useState)(0),x=(0,r.useRouter)().query,w=(0,i.useCallback)(e=>{console.log("Event:",e),"DATA_UPDATE"===e.type&&(console.log("Data update:",e.module,e.data),t(t=>{let s=p()(t);return"string"==typeof e.module&&(s[e.module]=e.data),s}))},[]),g=(0,i.useCallback)((e,t)=>{console.log("Setup WebSocketConnection");let s=new m.C(e,t,async()=>{s.getData(v),s.registerDataListener(v)});s.onEvent=w},[w]);(0,i.useEffect)(()=>{!s&&x&&x.apiKey&&(o(!0),g(Number(x.apiPort)||9170,String(x.apiKey)))},[s,g,x]);let k=(0,a.Z)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.ZP,{container:!0,direction:"column",spacing:2,alignItems:"stretch",sx:{padding:k.spacing(2)},children:(0,n.jsxs)(c.ZP,{container:!0,direction:"row",item:!0,xs:!0,children:[(0,n.jsx)(c.ZP,{item:!0,children:(0,n.jsx)(l.Z,{orientation:"vertical",variant:"scrollable",value:u,onChange:(e,t)=>{y(t)},children:v.map((e,t)=>(0,n.jsx)(d.Z,{label:Z[e],id:"scrollable-auto-tab-".concat(t),"aria-controls":"scrollable-auto-tabpanel-".concat(t)},t))})}),(0,n.jsx)(c.ZP,{item:!0,xs:!0,children:v.map((t,s)=>(0,n.jsx)(i.Fragment,{children:u===s?(0,n.jsx)(n.Fragment,{children:e[t]?(0,n.jsx)(DataItems,{data:e[t],name:Z[t]}):(0,n.jsx)(c.ZP,{container:!0,direction:"row",justifyContent:"center",sx:{margin:k.spacing(8,0,14)},children:(0,n.jsx)(h.Z,{})})}):""},s))})]})})})},P=s(1755),data=function(){return(0,n.jsx)(P.Z,{title:"Data",url:"https://system-bridge.timmo.dev",description:"Frontend for System Bridge",children:(0,n.jsx)(o.Z,{component:"article",maxWidth:"xl",children:(0,n.jsx)(Data,{})})})}}},function(e){e.O(0,[702,920,8,361,682,774,888,179],function(){return e(e.s=8792)}),_N_E=e.O()}]);