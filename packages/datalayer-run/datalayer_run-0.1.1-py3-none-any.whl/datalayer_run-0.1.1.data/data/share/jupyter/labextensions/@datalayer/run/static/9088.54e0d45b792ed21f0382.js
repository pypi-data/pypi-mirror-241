"use strict";(self.webpackChunk_datalayer_run=self.webpackChunk_datalayer_run||[]).push([[9088,9295],{51316:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(10361),r=n.n(s)()((function(e){return e[1]}));r.push([e.id,"body {\n  overflow-y: visible;\n}\n\n.dla-Container {\n  overflow-y: auto !important;\n}\n",""]);const a=r},29340:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(10361),r=n.n(s),a=n(51316),i=r()((function(e){return e[1]}));i.i(a.Z),i.push([e.id,"\n",""]);const o=i},11033:(e,t,n)=>{n.d(t,{Z:()=>v});var s=n(74512),r=n(64309),a=n(41436),i=n(19342),o=n(66029),l=n(96560);const c=n.n(l)().div`
	position: fixed;
	display:flex;
	justify-content: center;
	align-items: center;
	background-color: rgba(0, 0, 0, 0.3);
	height: 100vh;
	width: 100vw;
	right: 0;
	top:0;
	z-index: 1000000000;
`,d=function({open:e,element:t}){return e?(0,s.jsx)(c,{children:t}):(0,s.jsx)(s.Fragment,{})},h=(0,o.createContext)({openBackdrop:e=>{},closeBackdrop:()=>{}}),u=({children:e})=>{const[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)();return(0,s.jsxs)(h.Provider,{value:{openBackdrop:e=>{a(e),n(!0)},closeBackdrop:()=>{a(void 0),n(!1)}},children:[(0,s.jsx)(d,{open:t,element:r}),e]})};var m=n(57026),p=n(9295),g=n(31106);n(75441),n(33306),(0,m.A)();const f=(0,p.KJ)({}),x=e=>{const{inRouter:t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default"},children:(0,s.jsxs)(u,{children:[t?(0,s.jsx)(g.Z,{...e}):f.insideJupyterLab?(0,s.jsx)(r.MemoryRouter,{initialEntries:["/run"],children:(0,s.jsx)(g.Z,{...e})}):(0,s.jsx)(r.BrowserRouter,{children:(0,s.jsx)(g.Z,{...e})}),(0,s.jsx)(i.ToastContainer,{})]})})})};x.defaultProps={inRouter:!1};const v=x},31106:(e,t,n)=>{n.d(t,{D:()=>gt,Z:()=>ft});var s=n(74512),r=n(66029),a=n(64309),i=n(5795),o=n(79304),l=n.n(o);const c=void 0,d=void 0,h="DATALAYER_RUN_AUTH_USER",u="DATALAYER_RUN_AUTH_TOKEN",m=()=>{const e=(0,a.useNavigate)();return(t,n=null,s=!0)=>{n&&n.preventDefault(),window.scrollTo(0,0),document.body.scrollTop=0,e(t)}};var p=n(57026),g=n(69252);const f=(e,t)=>e?t?e+" "+t:e:t??"",x=(0,n(75489).create)(((e,t)=>({tab:0,getIntTab:()=>Math.floor(t().tab),setTab:t=>e((e=>({tab:t}))),user:c,token:d,setAuth:(t,n)=>{(e=>{if(e){const t={handle:e.handle,firstName:e.firstName,lastName:e.lastName,email:e.email,displayName:e.displayName,joinDate:e.joinDate};window.localStorage.setItem(h,JSON.stringify(t))}else window.localStorage.removeItem(h)})(t),(e=>{if(e){if(localStorage.setItem(u,e),e!==d)try{l()(e)}catch(e){console.error(e)}}else window.localStorage.removeItem(u)})(n),e((e=>({user:t}))),e((e=>({token:n})))},serviceManager:void 0,setServiceManager:t=>{e((e=>({serviceManager:t})))},showDisclaimer:!0,setShowDisclaimer:t=>{e((e=>({showDisclaimer:t})))}}))),v=x,_=new Map,j=()=>{const{setAuth:e,token:t}=x(),n=m(),s=s=>fetch(s.url,{method:s.method,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${s.token??t}`},body:s.body?JSON.stringify(s.body):void 0,credentials:"include"}).then((t=>{if(200!=t.status){if(401!==t.status)throw new Error(t.status.toString());e(void 0,void 0),n("/run/login")}return t.json()})).catch((function(e){throw e}));return{apiRequest:s,createJupyterServer:e=>{s({url:`${(0,p.PV)()}/api/operator/jupyter/server/${e}`,method:"POST"}).then((e=>{console.log("---",e)}))},deleteJupyterServer:e=>{s({url:`${(0,p.PV)()}/api/operator/jupyter/server/${e}`,method:"DELETE"}).then((e=>{console.log("---",e)}))},getUser:e=>_.get(e),me:t=>{s({url:`${(0,p.ls)()}/api/iam/me`,method:"GET",token:t}).then((n=>{const s=n.me;if(s){const n={uid:s.uid,handle:s.handle,email:s.email,firstName:s.first_name,lastName:s.last_name,displayName:s.display_name,joinDate:void 0};_.set(n.handle,n),e(n,t)}}))},mountLocalFolder:(e,t)=>{(0,g.v)(`jump/kernel-${e}-${t}`).then((e=>{console.log("----",e)})).catch((e=>{console.error(`Error while accessing the jupyter server datalayer_run extension.\n${e}`)}))},refreshUser:e=>s({url:`${(0,p.ls)()}/api/iam/account/${e}`,method:"GET"}).then((e=>(e.success&&e.user&&((e,t)=>{if(e){const n={uid:e.uid,handle:e.user_handle_s,email:e.user_email_s,firstName:e.user_first_name_t,lastName:e.user_last_name_t,displayName:f(e.user_first_name_t,e.user_last_name_t),joinDate:e.join_ts_dt?new Date(e.join_ts_dt):void 0};t&&t.set(n.handle,n)}})(e.user,_),e))),unmountLocalFolder:(e,t)=>{(0,g.v)(`jump/kernel-${e}-${t}`,{method:"DELETE"}).then((e=>{console.log("----",e)})).catch((e=>{console.error(`Error while accessing the jupyter server datalayer_run extension.\n${e}`)}))}}},w=j;var y=n(12221),C=n(32126),b=n(59689),k=n(83284),F=n(2470),S=n(19118),M=n(76602),D=n(53646);const E={small:16,medium:32,large:64},Z=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",className:"icon",viewBox:"0 0 896 896",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",width:n?"string"==typeof n?E[n]:n:"16px","aria-hidden":"true",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M747.4 354.7C701.6 233.9 584.9 148 448.2 148S194.8 233.8 149 354.6C63.3 377.1 0 455.1 0 548c0 110.5 89.5 200 199.9 200h496.2C806.5 748 896 658.5 896 548c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H199.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 0176 548c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}))})),P={small:16,medium:32,large:64},R=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor",viewBox:"0 0 18 18","aria-hidden":"true",width:n?"string"==typeof n?P[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:s?"#757575":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#757575")?"white":"currentColor",d:"M3.643 11.143H1.5V16.5h5.357v-2.143H3.643v-3.214zM1.5 6.857h2.143V3.643h3.214V1.5H1.5v5.357zm12.857 7.5h-3.214V16.5H16.5v-5.357h-2.143v3.214zM11.143 1.5v2.143h3.214v3.214H16.5V1.5h-5.357z"}))})),T={small:16,medium:32,large:64},I=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",width:n?"string"==typeof n?T[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M10 0c.293 0 .585.013.876.039.929.08 1.612.767 1.824 1.573l.36 1.384c.022.083.099.198.265.28.289.143.568.304.835.483.154.102.291.112.374.089l1.378-.38c.806-.22 1.74.027 2.275.788.338.481.633.99.88 1.523.394.843.14 1.777-.454 2.364L17.595 9.15c-.061.06-.122.184-.11.367.02.322.02.644 0 .966-.012.183.047.307.11.367l1.018 1.008c.593.586.848 1.52.454 2.363a9.967 9.967 0 01-.88 1.521c-.535.763-1.47 1.01-2.275.788l-1.377-.378c-.084-.023-.221-.013-.375.09-.268.178-.546.34-.835.482-.166.082-.242.197-.264.28l-.362 1.382c-.21.808-.894 1.495-1.823 1.575a9.998 9.998 0 01-1.752 0c-.929-.08-1.611-.767-1.823-1.575l-.361-1.382c-.022-.083-.099-.198-.265-.28a7.181 7.181 0 01-.835-.483c-.154-.102-.291-.112-.374-.088l-1.378.378c-.805.22-1.74-.026-2.275-.787-.337-.481-.632-.99-.88-1.523-.394-.844-.14-1.777.453-2.364l1.019-1.007c.063-.06.123-.184.11-.367a7.768 7.768 0 010-.966c.013-.183-.047-.307-.11-.367L1.386 8.142C.794 7.556.54 6.623.933 5.78a9.9 9.9 0 01.88-1.521c.535-.763 1.47-1.01 2.275-.788l1.377.377c.084.024.221.014.375-.088.268-.179.546-.34.835-.483.166-.082.243-.197.264-.28L7.3 1.614C7.511.806 8.195.119 9.124.037 9.413.014 9.705 0 10 0zm-.714 1.906c-.045.004-.135.045-.171.183L8.754 3.47c-.184.701-.686 1.209-1.248 1.486a5.644 5.644 0 00-.625.363c-.521.347-1.212.529-1.911.337l-1.379-.378c-.136-.038-.218.02-.243.056-.275.39-.515.805-.717 1.237-.017.039-.026.138.074.238l1.019 1.007c.514.508.702 1.196.662 1.82a5.887 5.887 0 000 .728c.04.623-.148 1.312-.662 1.82L2.705 13.19c-.101.1-.091.199-.074.238.203.432.442.846.717 1.236.025.038.106.095.243.058l1.378-.38c.7-.19 1.391-.01 1.912.338.202.134.41.255.627.363.558.277 1.062.786 1.246 1.486l.361 1.381c.036.136.126.179.171.183a8.26 8.26 0 001.428 0c.045-.004.135-.045.171-.183l.361-1.381c.184-.701.686-1.209 1.248-1.486.216-.108.425-.229.625-.363.521-.347 1.212-.528 1.911-.337l1.379.379c.136.036.219-.02.244-.057.274-.391.513-.805.716-1.237.017-.039.026-.138-.074-.238l-1.019-1.007c-.514-.508-.702-1.196-.662-1.82a5.887 5.887 0 000-.728c-.04-.623.148-1.312.662-1.82l1.019-1.007c.101-.1.091-.199.074-.238a8.082 8.082 0 00-.716-1.236c-.025-.037-.107-.095-.244-.058l-1.378.38c-.7.19-1.391.01-1.912-.338-.2-.135-.41-.256-.627-.363-.558-.277-1.062-.786-1.246-1.486l-.361-1.381c-.036-.138-.126-.179-.171-.183a8.251 8.251 0 00-1.428 0zM13.75 10a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zm-1.875 0a1.875 1.875 0 10-3.75 0 1.875 1.875 0 003.75 0z"}))})),N={small:16,medium:32,large:64},z=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor","aria-hidden":"true",viewBox:"0 0 50 50",width:n?"string"==typeof n?N[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:s?"#e26d6d":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#e26d6d")?"white":"currentColor",strokeWidth:2.5,d:"M0 0h50v10H0zm0 0"}),r.createElement("path",{fill:s?"#f9cb07":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#f9cb07")?"white":"currentColor",strokeWidth:2.5,d:"M0 20h50v10H0zm0 0"}),r.createElement("path",{fill:s?"#49b3d9":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#49b3d9")?"white":"currentColor",strokeWidth:2.5,d:"M0 40h50v10H0zm0 0"}))})),L={small:16,medium:32,large:64},O=r.forwardRef((function({title:e,titleId:t,size:n,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",width:n?"string"==typeof n?L[n]:n:"16px",strokeWidth:2,className:"feather feather-log-out",viewBox:"0 0 24 24","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}))})),W=()=>{const e=m();return(0,s.jsxs)(F.P,{children:[(0,s.jsx)(F.P.Anchor,{children:(0,s.jsx)(S.h,{icon:D.Ui8,variant:"invisible","aria-label":""})}),(0,s.jsx)(F.P.Overlay,{width:"medium",children:(0,s.jsxs)(M.S,{children:[(0,s.jsxs)(M.S.Group,{title:"More...",children:[(0,s.jsxs)(M.S.Item,{onSelect:()=>e("/run/usage"),children:[(0,s.jsx)(M.S.LeadingVisual,{children:(0,s.jsx)(Z,{})}),"Usage",(0,s.jsx)(M.S.Description,{variant:"block",children:"Monitor the CPU and Memory usage of your kernels."})]}),(0,s.jsxs)(M.S.Item,{onSelect:()=>e("/run/billing"),children:[(0,s.jsx)(M.S.LeadingVisual,{children:(0,s.jsx)(R,{})}),"Billing",(0,s.jsx)(M.S.Description,{variant:"block",children:"View download and pay your bills."})]}),(0,s.jsxs)(M.S.Item,{onSelect:()=>e("/run/settings"),children:[(0,s.jsx)(M.S.LeadingVisual,{children:(0,s.jsx)(I,{})}),"Settings",(0,s.jsx)(M.S.Description,{variant:"block",children:"Configure your personal settings."})]}),(0,s.jsxs)(M.S.Item,{onSelect:()=>e("/run/docs"),children:[(0,s.jsx)(M.S.LeadingVisual,{children:(0,s.jsx)(D.vJ3,{})}),"Documentation",(0,s.jsx)(M.S.Description,{variant:"block",children:"Documentation to help you use Datalayer."})]}),(0,s.jsxs)(M.S.Item,{onSelect:()=>e("/run/about"),children:[(0,s.jsx)(M.S.LeadingVisual,{children:(0,s.jsx)(z,{})}),"About",(0,s.jsx)(M.S.Description,{variant:"block",children:"Learn how to scale you local JupyterLab with remote kernels with Datalayer."})]})]}),(0,s.jsx)(M.S.Divider,{}),(0,s.jsxs)(M.S.Item,{variant:"danger",onSelect:t=>e("/run/logout"),children:[(0,s.jsx)(M.S.LeadingVisual,{children:(0,s.jsx)(O,{})}),"Logout"]})]})})]})},A=()=>{const e=m();return(0,s.jsx)(b.ZP,{colorMode:"night",nightScheme:"dark_dimmed",children:(0,s.jsxs)(k.Z,{sx:{paddingTop:0,height:45,paddingBottom:0},children:[(0,s.jsx)(k.Z.Item,{full:!0,children:(0,s.jsx)(k.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/run")},children:"Home"})}),(0,s.jsx)(k.Z.Item,{children:(0,s.jsx)(k.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/run/profile")},children:"Profile"})}),(0,s.jsx)(k.Z.Item,{children:(0,s.jsx)(W,{})})]})})},K=e=>{const{content:t}=e;return(0,s.jsxs)(y.X,{containerWidth:"full",padding:"none",sx:{overflow:"visible"},children:[(0,s.jsx)(y.X.Header,{children:(0,s.jsx)(A,{})}),(0,s.jsx)(y.X.Pane,{"aria-label":"pane-start",position:{regular:"start",narrow:"start",wide:"start"},resizable:!0,sticky:!0,width:{min:"100px",max:"500px",default:"150px"},children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)(y.X.Content,{sx:{minHeight:"calc(100vh - 380px)"},children:(0,s.jsx)(C.Z,{children:t})}),(0,s.jsx)(y.X.Pane,{resizable:!0,position:{regular:"end",narrow:"end",wide:"end"},width:{min:"100px",max:"500px",default:"150px"},"aria-label":"pane-end"}),(0,s.jsx)(y.X.Footer,{divider:"none"})]})};K.defaultProps={};const V=K,$=()=>{const e=m();return(0,s.jsx)(b.ZP,{colorMode:"night",nightScheme:"dark_dimmed",children:(0,s.jsxs)(k.Z,{sx:{paddingTop:0,height:45,paddingBottom:0},children:[(0,s.jsx)(k.Z.Item,{children:(0,s.jsx)(k.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/run")},children:"Home"})}),(0,s.jsx)(k.Z.Item,{children:(0,s.jsx)(k.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/run/login")},children:"Login"})}),(0,s.jsx)(k.Z.Item,{children:(0,s.jsx)(k.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/run/join")},children:"Join"})})]})})},H=e=>{const{content:t}=e;return(0,s.jsxs)(y.X,{containerWidth:"full",padding:"none",sx:{overflow:"visible"},children:[(0,s.jsx)(y.X.Header,{children:(0,s.jsx)($,{})}),(0,s.jsx)(y.X.Content,{sx:{minHeight:"calc(100vh - 380px)"},children:(0,s.jsx)(C.Z,{children:t})}),(0,s.jsx)(y.X.Footer,{divider:"none"})]})};H.defaultProps={};const B=H;var U=n(42913),J=n(11048),Y=n(5917),q=n(62005),X=n(18310),G=n(19893),Q=n(57687),ee=n(52746),te=n(16419),ne=n(14675),se=n(85680);const re={small:"3px",medium:"6px",large:"12px",full:"100vh"},ae={small:"0 1px 0 rgba(31,35,40,0.04)",medium:"0 3px 6px rgba(140,149,159,0.15)",large:"0 8px 24px rgba(140,149,159,0.2)",extraLarge:"0 12px 28px rgba(140,149,159,0.3)"},ie=e=>{const{sx:t,rounded:n,border:r,shadow:a,children:i,...o}=e;return(0,s.jsx)(C.Z,{sx:{...t||void 0,...n?"string"==typeof n?{borderRadius:re[n]}:{borderRadius:e.rounded}:void 0,...r?{borderWidth:1,borderStyle:"solid",borderColor:"border.default"}:void 0,...a?{boxShadow:ae[a]}:{boxShadow:ae.small}},...o,children:i})};ie.Header=e=>{const{title:t,description:n,leadingIcon:r,action:a}=e;return(0,s.jsxs)(C.Z,{display:"flex",alignItems:"center",sx:{p:3},children:[r&&(0,s.jsx)(C.Z,{sx:{mr:3},children:(0,s.jsx)(se.Z,{size:"medium",icon:r})}),(0,s.jsxs)(C.Z,{sx:{flexGrow:1},children:[(0,s.jsx)(q.Z,{display:"block",children:t}),(0,s.jsx)(q.Z,{display:"block",color:"fg.muted",children:n})]}),a&&(0,s.jsx)(C.Z,{children:a})]})},ie.Image=({url:e,image:t,svg:n,height:r})=>(0,s.jsxs)(C.Z,{display:"block",width:"100%",height:`${r}px`,backgroundImage:`url(${e})`,sx:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",objectFit:"cover"},children:[t&&(0,s.jsx)("img",{src:t,style:{maxHeight:`${r}px`}}),n&&(0,s.jsx)("img",{src:`data:image/svg+xml;utf8,${n}`,style:{maxHeight:r}})]}),ie.Content=({children:e})=>(0,s.jsx)(C.Z,{display:"block",sx:{p:3},children:e}),ie.Actions=({children:e})=>(0,s.jsx)(C.Z,{display:"block",sx:{p:3},children:e});var oe=n(46722);const le=e=>{const{leadingIcon:t,variant:n,onClose:a,...i}=e,[o,l]=(0,r.useState)(!0);return o?(0,s.jsx)(oe.Z,{variant:n,...i,children:(0,s.jsxs)(C.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsxs)(C.Z,{sx:{flexGrow:1},children:[t&&(0,s.jsx)(se.Z,{icon:t}),(0,s.jsx)(q.Z,{color:`${"default"===n?"accent":"warning"===n?"attention":n}.fg`,children:e.children})]}),(0,s.jsx)(C.Z,{onClick:()=>{a&&a(),l(!1)},sx:{cursor:"pointer"},children:(0,s.jsx)(D.b0D,{size:20})})]})}):null},ce={small:16,medium:32,large:64},de=r.forwardRef((function({title:e,titleId:t,size:n,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?ce[n]:n:"16px","aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("circle",{cx:36,cy:36,r:28,fill:"#b1cc33"}),r.createElement("circle",{cx:36,cy:36,r:28,fill:"none",stroke:"#000",strokeLinejoin:"round",strokeWidth:2}))})),he={small:16,medium:32,large:64},ue=r.forwardRef((function({title:e,titleId:t,size:n,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?he[n]:n:"16px","aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("circle",{cx:36,cy:36,r:28,fill:"#d22f27"}),r.createElement("circle",{cx:36,cy:36,r:28,fill:"none",stroke:"#000",strokeLinejoin:"round",strokeWidth:2}))})),me={small:16,medium:32,large:64},pe=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:n?"string"==typeof n?me[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M14 10h-2v12h2V10zm6 0h-2v12h2V10z"}),r.createElement("path",{fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M16 4A12 12 0 114 16 12 12 0 0116 4m0-2a14 14 0 1014 14A14 14 0 0016 2z"}))})),ge={small:16,medium:32,large:64},fe=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:n?"string"==typeof n?ge[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M184 112a8 8 0 01-8 8h-64a8 8 0 010-16h64a8 8 0 018 8zm-8 24h-64a8 8 0 000 16h64a8 8 0 000-16zm48-88v160a16 16 0 01-16 16H48a16 16 0 01-16-16V48a16 16 0 0116-16h160a16 16 0 0116 16zM48 208h24V48H48zm160 0V48H88v160h120z"}))})),xe={small:16,medium:32,large:64},ve=r.forwardRef((function({title:e,titleId:t,size:n,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?xe[n]:n:"16px","aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#ea5a47",d:"M58.14 21.78l-7.76-8.013-14.29 14.22-14.22-14.22-8.013 8.013L28.217 36l-14.36 14.22 8.014 8.013 14.22-14.22 14.29 14.22 7.76-8.013L43.921 36z"}),r.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M58.14 21.78l-7.76-8.013-14.29 14.22-14.22-14.22-8.013 8.013L28.207 36l-14.35 14.22 8.014 8.013 14.22-14.22 14.29 14.22 7.76-8.013L43.921 36z"}))})),_e={small:16,medium:32,large:64},je=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor",viewBox:"0 0 21 21","aria-hidden":"true",width:n?"string"==typeof n?_e[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:s?"#767677":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#767677")?"white":"currentColor",d:"M17.734 1.61A1.207 1.207 0 1116.477.478a1.193 1.193 0 011.257 1.132z"}),r.createElement("path",{fill:s?"#F37726":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#F37726")?"white":"currentColor",d:"M10.693 15.555c-3.205 0-6.021-1.15-7.478-2.848a7.973 7.973 0 0014.956 0c-1.453 1.698-4.259 2.848-7.478 2.848zM10.693 4.51c3.205 0 6.021 1.15 7.478 2.849a7.973 7.973 0 00-14.956 0c1.457-1.702 4.26-2.849 7.478-2.849z"}),r.createElement("path",{fill:s?"#9E9E9E":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#9E9E9E")?"white":"currentColor",d:"M6.281 18.86a1.52 1.52 0 11-1.584-1.424 1.505 1.505 0 011.584 1.425z"}),r.createElement("path",{fill:s?"#616262":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#616262")?"white":"currentColor",d:"M3.58 4.123a.876.876 0 11.85-.911.887.887 0 01-.85.911z"}))}));var we=n(29018),ye=n(67095);const Ce=()=>{const[e,t]=(0,r.useState)(0);return(0,U.useInterval)((()=>{t(e>=100?0:e+1)}),100),(0,s.jsx)(ye.k,{progress:e,"aria-label":""})};var be=n(19342);const ke=be.toast.POSITION.TOP_CENTER,Fe=()=>({enqueueToast:(e,t)=>{switch(t.variant){case"info":be.toast.info(e,{position:ke});break;case"success":be.toast.success(e,{position:ke});break;case"warning":be.toast.warning(e,{position:ke});break;case"error":be.toast.error(e,{position:ke})}}}),Se="default",Me=e=>{const{adapter:t}=e,{user:n,serviceManager:a,setServiceManager:i,showDisclaimer:o,setShowDisclaimer:l}=v(),{enqueueToast:c}=Fe(),{createJupyterServer:d,mountLocalFolder:h,unmountLocalFolder:u}=j(),[m,p]=(0,r.useState)(),[g,f]=(0,r.useState)(!1),[x,_]=(0,r.useState)(new Map),[w,y]=(0,r.useState)(new Array),[b,k]=(0,r.useState)();(0,r.useEffect)((()=>{if(n&&t){d(Se);const r=t.jupyterLab.serviceManager,a=(e=n.handle,s=Se,(0,we.iy)(`https://dev1.datalayer.tech/jupyter/server/${e}/${s}`,`wss://dev1.datalayer.tech/jupyter/server/${e}/${s}`,"test"));r.remote=(0,we.p0)(a),i(r)}var e,s}),[n,t]);const F=e=>{k(Array.from(e.kernels.running()))};return(0,U.useInterval)((()=>{a&&a.remote&&(a.remote.kernelspecs.specs?.kernelspecs&&a.remote.kernelspecs.refreshSpecs().then((()=>{const e=Object.values(a.remote.kernelspecs.specs?.kernelspecs);0===e.length&&f(!1),f(!0),e.map((e=>{const t=e?.name;if(t&&t.startsWith("run-")){const s=e.metadata;s&&(x.set(t,{description:s.description,notebookExampleUrl:s.notebook_example_url}),_(x));const r=`kernel-${n.handle}-${t}`;a.getRemoteKernelSession(t,r,r).then((e=>{console.log(`--- ${t}`,e)}))}}))})),F(a.remote)),a&&y(Array.from(a.kernels.running()))}),5e3),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[o&&(0,s.jsxs)(le,{onClose:()=>l(!1),children:["Datalayer Run is released in ",(0,s.jsx)(J.Z,{children:"PREVIEW"})," mode. This means that the account you have created will not stay and can be removed at any time based on Datalayer's new releases. Read the ",(0,s.jsx)(Y.Z,{href:"https://docs.datalayer.run",target:"_blank",children:"documentation"})," for usage and support."]}),(0,s.jsx)(Q.m,{sx:{marginTop:1},children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Datalayer Run"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:g?(0,s.jsxs)(C.Z,{display:"flex",children:[(0,s.jsx)(C.Z,{children:(0,s.jsx)(de,{})}),(0,s.jsx)(C.Z,{ml:1,children:(0,s.jsx)(q.Z,{children:"Your remote Jupyter services are available."})})]}):(0,s.jsxs)(C.Z,{children:[(0,s.jsxs)(C.Z,{display:"flex",children:[(0,s.jsx)(C.Z,{children:(0,s.jsx)(ue,{})}),(0,s.jsx)(C.Z,{ml:1,children:(0,s.jsx)(q.Z,{children:"We are starting your Jupyter services...."})})]}),(0,s.jsx)(C.Z,{mt:3,children:(0,s.jsx)(Ce,{})})]})}),g&&a&&a.remote&&b?(0,s.jsxs)(C.Z,{mt:3,children:[(0,s.jsxs)(ee.i.Container,{children:[(0,s.jsx)(ee.i.Title,{as:"h2",id:"images",children:"Remote Kernels"}),(0,s.jsx)(ee.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available remote kernels."}),(0,s.jsx)(te.w,{"aria-labelledby":"remote-kernels","aria-describedby":"remote-kernels-subtitle",data:b,columns:[{header:"Name",field:"name",renderCell:e=>(0,s.jsx)(q.Z,{children:e.name})},{header:"Description",id:"description",renderCell:e=>(0,s.jsx)(q.Z,{children:x.get(e.name)?.description})},{header:"State",field:"execution_state",renderCell:e=>(0,s.jsx)(q.Z,{children:e.execution_state})},{header:"Start / Pause",id:"start-pause-action",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S.h,{"aria-label":`Pause the kernel with id ${e.id}`,icon:pe,size:"small",onClick:()=>c("The Start/Pause feature is not yet implemented... Checkout out the next release ðŸŽ‰, it is going to be awesome.",{variant:"warning"})})})},{header:"Example",id:"example-action",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S.h,{"aria-label":`Create an example notebook for kernel ${e.name}`,icon:fe,size:"small",onClick:()=>{(async(e,t,n)=>{const s=await e.commands.execute("notebook:create-new",{cwd:"/"});s.context.rename(t+".ipynb");const r=await fetch(n),a=(await r.text()).replaceAll("\\n","");s.context.model.fromJSON({...JSON.parse(a)})})(t?.jupyterLab,e.name,x.get(e.name)?.notebookExampleUrl),c(`An example notebook is created for kernel ${e.name}.`,{variant:"info"})}})})},{header:"Mount local folder",id:"mount-local-folder",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(X.Z,{size:"small",checked:m===e.name,onClick:()=>{m===e.name?(u(n.handle,e.name),p(void 0),c(`You local folder is not more accessible from ${e.name} kernel.`,{variant:"info"})):(u(n.handle,e.name),h(n.handle,e.name),p(e.name),c(`You local folder should be accessible from a Notebook connected to the ${e.name} kernel.`,{variant:"info"}))},disabled:void 0!==m&&m!==e.name})})})},{header:"Delete",id:"delete-action",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S.h,{"aria-label":`Delete the kernel ${e.name}`,icon:ve,size:"small",onClick:()=>{((e,t)=>{e.kernels.shutdown(t).then((()=>{console.log(`Kernel ${t} is deleted.`),F(e)}))})(a.remote,e.id),c(`The kernel ${e.name} is being deleted.`,{variant:"info"})}})})}]})]}),0===b.length&&(0,s.jsx)(Ce,{})]}):g&&(0,s.jsxs)(ne.Z,{border:!0,children:[(0,s.jsx)(ne.Z.Visual,{children:(0,s.jsx)(je,{size:"medium"})}),(0,s.jsx)(ne.Z.Heading,{children:"Remote Kernels"}),(0,s.jsx)(ne.Z.Description,{children:(0,s.jsxs)(C.Z,{sx:{textAlign:"center"},children:[(0,s.jsx)(C.Z,{children:(0,s.jsx)(G.Z,{})}),(0,s.jsx)(C.Z,{children:"Hold on, we are setting up your remote kernels..."})]})})]}),g&&(0,s.jsx)(C.Z,{mt:3,children:(0,s.jsxs)(ee.i.Container,{children:[(0,s.jsx)(ee.i.Title,{as:"h2",id:"images",children:"Local Kernels"}),(0,s.jsx)(ee.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available local kernels."}),a&&w&&(0,s.jsx)(te.w,{"aria-labelledby":"local-kernels","aria-describedby":"local-kernels-subtitle",data:w,columns:[{header:"Name",field:"name",renderCell:e=>(0,s.jsx)(q.Z,{children:e.name})},{header:"ID",field:"id",renderCell:e=>(0,s.jsx)(q.Z,{children:e.id})},{header:"State",field:"execution_state",renderCell:e=>(0,s.jsx)(q.Z,{children:e.execution_state})}]})]})}),g&&(0,s.jsx)(C.Z,{mt:3,children:(0,s.jsxs)(ne.Z,{border:!0,children:[(0,s.jsx)(ne.Z.Visual,{children:(0,s.jsx)(je,{size:"medium"})}),(0,s.jsx)(ne.Z.Heading,{children:"Browser Kernels"}),(0,s.jsx)(ne.Z.Description,{children:(0,s.jsx)(C.Z,{sx:{textAlign:"center"},children:(0,s.jsx)(C.Z,{children:"Browser kernels (Pyodide) will be supported in a next release of Datalayer Run."})})})]})})]})})};var De=n(21809),Ee=n(66062);const Ze={small:16,medium:32,large:64},Pe=r.forwardRef((function({title:e,titleId:t,size:n,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",width:n?"string"==typeof n?Ze[n]:n:"16px",strokeWidth:2,className:"feather feather-log-in",viewBox:"0 0 24 24","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M15 12H3"}))})),Re=e=>{const t=m();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{m:3,children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Datalayer Run"}),(0,s.jsx)(Q.m.Description,{children:"alpha"})]})}),(0,s.jsx)(De.Z,{children:"Scale your local JupyterLab with the Cloud."}),(0,s.jsxs)(Y.Z,{href:"",onClick:e=>t("/run/login",e),children:[(0,s.jsx)(Ee.Z,{sx:{marginBottom:3},children:(0,s.jsx)(Ee.Z.Icon,{icon:Pe})}),(0,s.jsx)(q.Z,{children:"You need to login to use the Remote Kernels"})]})]})})};var Te=n(41436);const Ie=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ne=(e,t)=>e.length>=t,ze=()=>{const{apiRequest:e}=j(),{setAuth:t}=v(),{enqueueToast:n}=Fe(),a=m(),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)({handle:void 0,password:void 0}),[d,h]=(0,r.useState)({handle:void 0,password:void 0}),u=e=>{"Enter"===e.key&&g()},g=async()=>{!i&&d.handle&&d.password&&(o(!0),e({url:`${(0,p.ls)()}/api/iam/login`,method:"POST",body:{handle:l.handle,password:l.password}}).then((e=>{if(o(!1),e.success){const n=e.token,s={handle:e.user.user_handle_s,firstName:e.user.user_first_name_t,lastName:e.user.user_last_name_t,displayName:f(e.user.user_first_name_t,e.user.user_last_name_t),credits:e.user.credits_i,joinDate:e.user.join_ts_dt?new Date(e.user.join_ts_dt):void 0,email:e.user.user_email_s};t(s,n),a("/run")}else n(e.message,{variant:"warning"}),e.errors&&e.errors.map((e=>n(e,{variant:"warning"})))})).catch((e=>{console.error(e),o(!1),n("Application Error.",{variant:"error"})})))};return(0,r.useEffect)((()=>{h({...d,handle:void 0===l.handle?void 0:Ne(l.handle,1)?"success":"error",password:void 0===l.password?void 0:Ne(l.password,1)?"success":"error"})}),[l]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Te.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default)"},children:(0,s.jsx)(C.Z,{style:{height:"calc(100vh - 250px)"},pl:5,pr:5,pt:10,children:(0,s.jsxs)(C.Z,{sx:{maxWidth:"1280px",margin:"0 auto"},children:[(0,s.jsx)(Te.Heading,{children:"Login to Datalayer Run"}),(0,s.jsxs)(C.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,s.jsxs)(C.Z,{sx:{label:{marginTop:2},paddingRight:"10%"},children:[(0,s.jsx)(C.Z,{mt:5,children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:d.handle,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your handle"}),(0,s.jsx)(Te.TextInput,{autoFocus:!0,fullWidth:!0,placeholder:"Your handle",size:"large",value:l.handle,onChange:e=>{c((t=>({...t,handle:e.target.value})))},onKeyDown:u}),"error"===d.handle?(0,s.jsx)(Te.FormControl.Validation,{children:"Your handle may not be empty."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:d.password,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your password"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,placeholder:"Your password",size:"large",type:"password",value:l.password,onChange:e=>{c((t=>({...t,password:e.target.value})))},onKeyDown:u}),"error"===d.password?(0,s.jsx)(Te.FormControl.Validation,{children:"Your password may not be empty."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsxs)(C.Z,{mt:5,children:[(0,s.jsx)(Te.Button,{variant:"primary",disabled:i||"success"!==d.handle||"success"!==d.password,onClick:g,children:i?"Login...":"Login"}),(0,s.jsx)(C.Z,{pt:6}),(0,s.jsx)(Te.Link,{onClick:()=>{a("/run/join")},children:"Don't have an account?"}),(0,s.jsx)(C.Z,{pt:3}),(0,s.jsx)(Te.Link,{onClick:()=>{a("/run/password")},children:"Forgot password?"}),(0,s.jsx)(C.Z,{pt:3}),(0,s.jsx)(Te.Link,{onClick:()=>{a("/run/join/confirm")},children:"Activate your account with a code"})]})]}),(0,s.jsx)(C.Z,{m:3,children:(0,s.jsx)(Te.CTABanner,{})})]})]})})})})},Le=()=>{const{setAuth:e}=v(),t=m();return(0,r.useEffect)((()=>{e(void 0,void 0),t("/run")}),[]),(0,s.jsx)(s.Fragment,{})},Oe=()=>{const{apiRequest:e}=j(),{enqueueToast:t}=Fe(),n=m(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)({handle:void 0,email:void 0,firstName:void 0,lastName:void 0,password:void 0,passwordConfirm:void 0}),[c,d]=(0,r.useState)({handle:void 0,email:void 0,firstName:void 0,lastName:void 0,password:void 0,passwordConfirm:void 0});return(0,r.useEffect)((()=>{var e;d({...c,handle:void 0===o.handle?void 0:Ne(o.handle,1)?"success":"error",email:void 0===o.email?void 0:(e=o.email,Ie.test(e)?"success":"error"),firstName:void 0===o.firstName?void 0:Ne(o.firstName,1)?"success":"error",lastName:void 0===o.lastName?void 0:Ne(o.lastName,1)?"success":"error",password:void 0===o.password?void 0:Ne(o.password,5)?"success":"error",passwordConfirm:void 0===o.passwordConfirm?void 0:Ne(o.passwordConfirm,5)?"success":"error"})}),[o]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Te.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default)"},children:(0,s.jsx)(C.Z,{style:{height:"calc(100vh - 250px)"},pl:5,pr:5,pt:10,children:(0,s.jsxs)(C.Z,{sx:{maxWidth:"1280px",margin:"0 auto"},children:[(0,s.jsx)(Te.Heading,{children:"Join Datalayer Run"}),(0,s.jsxs)(C.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,s.jsxs)(C.Z,{sx:{label:{marginTop:2}},children:[(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.handle,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your handle"}),(0,s.jsx)(Te.TextInput,{autoFocus:!0,fullWidth:!0,value:o.handle,onChange:e=>{l((t=>({...t,handle:e.target.value})))}}),"error"===c.handle?(0,s.jsx)(Te.FormControl.Validation,{children:"Your handle must have more than 1 character."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.email,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your email"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"email",value:o.email,onChange:e=>{l((t=>({...t,email:e.target.value})))}}),"error"===c.email?(0,s.jsx)(Te.FormControl.Validation,{children:"Your email is not valid."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.firstName,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your first name"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,value:o.firstName,onChange:e=>{l((t=>({...t,firstName:e.target.value})))}}),"error"===c.firstName?(0,s.jsx)(Te.FormControl.Validation,{children:"Your first name must have more than 1 character."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.lastName,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your last name"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,value:o.lastName,onChange:e=>{l((t=>({...t,lastName:e.target.value})))}}),"error"===c.lastName?(0,s.jsx)(Te.FormControl.Validation,{children:"Your last name must have more than 1 character."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.password,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your password"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"password",value:o.password,onChange:e=>{l((t=>({...t,password:e.target.value})))}}),"error"===c.password?(0,s.jsx)(Te.FormControl.Validation,{children:"Your password is not valid."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.passwordConfirm,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your password confirmation"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"password",value:o.passwordConfirm,onChange:e=>{l((t=>({...t,passwordConfirm:e.target.value})))}}),"error"===c.passwordConfirm?(0,s.jsx)(Te.FormControl.Validation,{children:"Your password confirmation is not valid."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{sx:{display:"flex"},mt:2,children:(0,s.jsx)(Te.Button,{variant:"primary",type:"submit",disabled:a||"success"!==c.handle||"success"!==c.email||"success"!==c.firstName||"success"!==c.lastName||"success"!==c.password||"success"!==c.passwordConfirm,onClick:async()=>{var s;a||((s=o).password===s.passwordConfirm||(t("Please make sure your passwords match.",{variant:"warning"}),0))&&(i(!0),e({url:`${(0,p.ls)()}/api/iam/join/request/token`,method:"POST",body:{handle:o.handle,email:o.email,firstName:o.firstName,lastName:o.lastName,password:o.password,passwordConfirm:o.passwordConfirm}}).then((e=>{i(!1),e.success?(t(e.message,{variant:"success"}),n("/run/join/confirm")):(t(e.message,{variant:"warning"}),e.errors.map((e=>t(e,{variant:"error"}))))})).catch((e=>{console.error(e),i(!1),t("Application Error.",{variant:"error"})})))},children:a?"Requesting...":"Request to join"})})]}),(0,s.jsx)(C.Z,{m:3,children:(0,s.jsx)(Te.CTABanner,{})})]})]})})})})},We=()=>{const e=m(),{apiRequest:t}=j(),{enqueueToast:n}=Fe(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)({handle:void 0,token:void 0}),[c,d]=(0,r.useState)({handle:void 0,token:void 0});return(0,r.useEffect)((()=>{d({...c,handle:void 0===o.handle?void 0:Ne(o.handle,1)?"success":"error",token:void 0===o.token?void 0:Ne(o.token,1)?"success":"error"})}),[o]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Te.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default)"},children:(0,s.jsx)(C.Z,{style:{height:"calc(100vh - 250px)"},pl:5,pr:5,pt:10,children:(0,s.jsxs)(C.Z,{sx:{maxWidth:"1280px",margin:"0 auto"},children:[(0,s.jsx)(Te.Heading,{children:"Activate Datalayer Run"}),(0,s.jsxs)(C.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,s.jsxs)(C.Z,{sx:{label:{marginTop:2}},children:[(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.handle,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your handle"}),(0,s.jsx)(Te.TextInput,{autoFocus:!0,fullWidth:!0,value:o.handle,onChange:e=>{l((t=>({...t,handle:e.target.value})))}}),"error"===c.handle?(0,s.jsx)(Te.FormControl.Validation,{children:"Your handle must have more than 1 character."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.token,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your activation code (check your mail)"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"email",value:o.token,onChange:e=>{l((t=>({...t,token:e.target.value})))}}),"error"===c.token?(0,s.jsx)(Te.FormControl.Validation,{children:"Your activation code is too small."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{sx:{display:"flex"},mt:2,children:(0,s.jsx)(Te.Button,{variant:"primary",type:"submit",disabled:a||"success"!==c.handle||"success"!==c.token,onClick:async()=>{a||(i(!0),t({url:`${(0,p.ls)()}/api/iam/join/confirm/${o.handle}/${o.token}`,method:"GET"}).then((t=>{t.success?e("/run/join/welcome"):n(t.message,{variant:"error"})})).catch((t=>{console.error(t),n("Application Error.",{variant:"error"}),e("/run/login")})))},children:a?"Activating...":"Activate"})})]}),(0,s.jsx)(C.Z,{m:3,children:(0,s.jsx)(Te.CTABanner,{})})]})]})})})})},Ae=()=>{const{enqueueToast:e}=Fe(),t=m();return(0,r.useEffect)((()=>{e("Welcome to Datalayer Run - Login with your username and password",{variant:"success"}),t("/run/login")}),[]),(0,s.jsx)(s.Fragment,{})},Ke=e=>{const{apiRequest:t}=j(),n=m(),{enqueueToast:a}=Fe(),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)({handle:void 0,password:void 0,passwordConfirm:void 0}),[d,h]=(0,r.useState)({handle:void 0,password:void 0,passwordConfirm:void 0});return(0,r.useEffect)((()=>{h({...d,handle:void 0===l.password?void 0:Ne(l.password,1)?"success":"error",password:void 0===l.password?void 0:Ne(l.password,5)?"success":"error",passwordConfirm:void 0===l.passwordConfirm?void 0:Ne(l.passwordConfirm,5)?"success":"error"})}),[l]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Te.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default)"},children:(0,s.jsx)(C.Z,{style:{height:"calc(100vh - 250px)"},pl:5,pr:5,pt:10,children:(0,s.jsxs)(C.Z,{sx:{maxWidth:"1280px",margin:"0 auto"},children:[(0,s.jsx)(Te.Heading,{children:"Change your password"}),(0,s.jsxs)(C.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,s.jsxs)(C.Z,{sx:{label:{marginTop:2}},children:[(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:d.handle,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your handle"}),(0,s.jsx)(Te.TextInput,{autoFocus:!0,fullWidth:!0,value:l.handle,onChange:e=>{c((t=>({...t,handle:e.target.value})))}}),"error"===d.handle?(0,s.jsx)(Te.FormControl.Validation,{children:"Your handle must have more than 1 character."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:d.password,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your new pasword"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"password",value:l.password,onChange:e=>{c((t=>({...t,password:e.target.value})))}}),"error"===d.password?(0,s.jsx)(Te.FormControl.Validation,{children:"Your new password is not valid."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:d.passwordConfirm,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your new password confirmation"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"password",value:l.passwordConfirm,onChange:e=>{c((t=>({...t,passwordConfirm:e.target.value})))}}),"error"===d.passwordConfirm?(0,s.jsx)(Te.FormControl.Validation,{children:"Your password confirmation is not valid."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{sx:{display:"flex"},mt:2,children:(0,s.jsx)(Te.Button,{variant:"primary",type:"submit",disabled:i||"success"!==d.handle||"success"!==d.password||"success"!==d.passwordConfirm,onClick:()=>{i||(l.password===l.passwordConfirm||(a("Please make sure your passwords match.",{variant:"warning"}),0))&&(o(!0),t({url:`${(0,p.ls)()}/api/iam/password/token`,method:"POST",body:{handle:l.handle,password:l.password,passwordConfirm:l.passwordConfirm}}).then((e=>{o(!1),e.success?(a(e.message,{variant:"success"}),n("/run/password/confirm")):(a(e.message,{variant:"error"}),e.errors.map((e=>a(e,{variant:"error"}))))})).catch((e=>{console.error(e),o(!1),a("Application Error.",{variant:"error"})})))},children:i?"Sending mail to change password...":"Request to change password"})})]}),(0,s.jsx)(C.Z,{m:3,children:(0,s.jsx)(Te.CTABanner,{})})]})]})})})})},Ve=()=>{const{apiRequest:e}=j(),t=m(),{enqueueToast:n}=Fe(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)({handle:void 0,token:void 0}),[c,d]=(0,r.useState)({handle:void 0,token:void 0});return(0,r.useEffect)((()=>{d({...c,handle:void 0===o.handle?void 0:Ne(o.handle,1)?"success":"error",token:void 0===o.token?void 0:Ne(o.token,1)?"success":"error"})}),[o]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Te.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default)"},children:(0,s.jsx)(C.Z,{style:{height:"calc(100vh - 250px)"},pl:5,pr:5,pt:10,children:(0,s.jsxs)(C.Z,{sx:{maxWidth:"1280px",margin:"0 auto"},children:[(0,s.jsx)(Te.Heading,{children:"Confirm your password"}),(0,s.jsxs)(C.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,s.jsxs)(C.Z,{sx:{label:{marginTop:2}},children:[(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.handle,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your handle"}),(0,s.jsx)(Te.TextInput,{autoFocus:!0,fullWidth:!0,value:o.handle,onChange:e=>{l((t=>({...t,handle:e.target.value})))}}),"error"===c.handle?(0,s.jsx)(Te.FormControl.Validation,{children:"Your handle must have more than 1 character."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(Te.FormControl,{fullWidth:!0,validationStatus:c.token,children:[(0,s.jsx)(Te.FormControl.Label,{children:"Your activation code (check your mail)"}),(0,s.jsx)(Te.TextInput,{fullWidth:!0,type:"email",value:o.token,onChange:e=>{l((t=>({...t,token:e.target.value})))}}),"error"===c.token?(0,s.jsx)(Te.FormControl.Validation,{children:"Your activation token is too small."}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsx)(C.Z,{sx:{display:"flex"},mt:2,children:(0,s.jsx)(Te.Button,{variant:"primary",type:"submit",disabled:a||"success"!==c.handle||"success"!==c.token,onClick:async()=>{a||(i(!0),e({url:`${(0,p.ls)()}/api/iam/password/confirm/${o.handle}/${o.token}`,method:"GET"}).then((e=>{e.success?t("/run/password/welcome"):(n(e.message,{variant:"error"}),t("/run/login"))})).catch((e=>{console.error(e),n("Application Error.",{variant:"error"}),t("/run/login")})))},children:a?"Activating...":"Activate"})})]}),(0,s.jsx)(C.Z,{m:3,children:(0,s.jsx)(Te.CTABanner,{})})]})]})})})})},$e=()=>{const{enqueueToast:e}=Fe(),t=m();return(0,r.useEffect)((()=>{t("/run/login"),e("Welcome back to Datalayer Run - Login with your username and new password",{variant:"success"})}),[]),(0,s.jsx)(s.Fragment,{})};var He=n(20740);const Be=e=>{const{boxPanel:t}=e;return(0,s.jsx)("div",{style:{position:"relative"},children:(0,s.jsx)(C.Z,{className:"jp-LabShell",sx:{position:"relative","& .dla-Jupyter-Notebook":{height:1e3,maxHeight:1e3,width:"100%"},"& .jp-MainAreaWidget":{width:"100%",height:"100%"},"& .jp-Toolbar":{width:"100% !important"},"& .jp-NotebookPanel-notebook":{width:"100% !important",height:"100%"},"& .lm-mod-hidden":{display:"unset !important"}},children:(0,s.jsx)(i.Lumino,{children:t})})})},Ue=e=>{const{adapter:t}=e,{serviceManager:n}=v(),{createJupyterServer:a,deleteJupyterServer:i}=w(),[o,l]=(0,r.useState)(),[c,d]=(0,r.useState)(),[h,u]=(0,r.useState)();(0,r.useEffect)((()=>{t&&(async()=>{const e=await t.notebook("test.ipynb");u(e)})().catch(console.error)}),[t]);const m=()=>{l(Array.from(n.remote.kernels.running())),d(Array.from(n.remote.sessions.running()))};return(0,U.useInterval)((()=>{n&&n.remote&&m()}),5e3),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Me,{...e}),(0,s.jsx)(De.Z,{children:"Debugging Section"}),n&&n.remote&&(0,s.jsx)(C.Z,{children:(0,s.jsxs)(q.Z,{children:[n.remote.serverSettings.baseUrl," | ",n.remote.serverSettings.wsUrl]})}),(0,s.jsx)(C.Z,{mt:3,children:n&&n.remote&&o&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{mt:3,children:[(0,s.jsx)(C.Z,{children:"Kernels"}),o.map((e=>(0,s.jsx)(C.Z,{children:(0,s.jsxs)(C.Z,{children:[e.id," | ",e.name," | ",e.last_activity," | ",e.execution_state," | ",e.connections,(0,s.jsx)(Y.Z,{sx:{marginLeft:1},href:"",onClick:t=>{var s;t.preventDefault(),s=e.id,n.remote?.kernels.shutdown(s).then((()=>{console.log(`Kernel ${s} is deleted.`),m()}))},children:"delete"})]})},e.id)))]})})}),(0,s.jsx)(C.Z,{mt:3,children:n&&n.remote&&c&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{mt:3,children:[(0,s.jsx)(C.Z,{children:"Sessions"}),c.map((e=>(0,s.jsx)(C.Z,{children:(0,s.jsxs)(C.Z,{children:[e.id," | ",e.name," | ",e.path," | ",e.type," - ",e.kernel?.id," | ",e.kernel?.name,(0,s.jsx)(Y.Z,{href:"",sx:{marginLeft:1},onClick:t=>{var s;t.preventDefault(),s=e.id,n.remote?.sessions.shutdown(s).then((()=>{console.log(`Sessions ${s} is deleted.`),m()}))},children:"delete"})]})},e.id)))]})})}),(0,s.jsxs)(C.Z,{mt:3,mb:3,display:"flex",children:[(0,s.jsx)(C.Z,{children:(0,s.jsx)(He.z,{onClick:e=>{e.preventDefault(),a("default")},children:"Create Jupyter services"})}),(0,s.jsx)(C.Z,{ml:3,children:(0,s.jsx)(He.z,{onClick:e=>{e.preventDefault(),i("default")},children:"Delete Jupyter services"})})]}),h&&(0,s.jsx)(Be,{boxPanel:h})]})};var Je=n(32790);const Ye=e=>{const{adapter:t}=e,[n,a]=(0,r.useState)(),{createJupyterServer:i,deleteJupyterServer:o}=w();return(0,r.useEffect)((()=>{t&&(async()=>{const e=Je.ServerConnection.makeSettings({baseUrl:"https://dev1.datalayer.tech/api/jupyter",wsUrl:"wss://dev1.datalayer.tech/api/jupyter",token:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",appendToken:!0,init:{mode:"cors",credentials:"include",cache:"no-cache"}}),t=new Je.ServiceManager({serverSettings:e}),n=await t.sessions.startNew({name:"charlie-2",path:"test-2.ipynb",type:"notebook",kernel:{name:"python3"}},{kernelConnectionOptions:{handleComms:!0}});n&&console.log("---",n.kernel),a(t)})().catch(console.error)}),[t]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Kernels"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),n&&(0,s.jsx)(C.Z,{children:(0,s.jsxs)(q.Z,{children:[n?.serverSettings.baseUrl," | ",n?.serverSettings.wsUrl]})}),(0,s.jsx)(C.Z,{mt:3,children:n&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{mt:3,children:[(0,s.jsx)(C.Z,{children:"Kernels"}),Array.from(n.kernels.running()).map((e=>(0,s.jsx)(C.Z,{children:(0,s.jsxs)(C.Z,{children:[e.id," | ",e.name," | ",e.last_activity," | ",e.execution_state," | ",e.connections]})},e.id)))]})})}),(0,s.jsx)(C.Z,{mt:3,children:n&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{mt:3,children:[(0,s.jsx)(C.Z,{children:"Sessions"}),Array.from(n.sessions.running()).map((e=>(0,s.jsx)(C.Z,{children:(0,s.jsxs)(C.Z,{children:[e.id," | ",e.name," | ",e.path," | ",e.type," - ",e.kernel?.id," | ",e.kernel?.name]})},e.id)))]})})}),(0,s.jsx)(C.Z,{mt:3,children:(0,s.jsx)(He.z,{onClick:e=>{e.preventDefault(),i("test1")},children:"Create Jupyter services"})}),(0,s.jsx)(C.Z,{mt:3,children:(0,s.jsx)(He.z,{onClick:e=>{e.preventDefault(),o("test1")},children:"Delete Jupyter services"})})]})})},qe={small:16,medium:32,large:64},Xe=r.forwardRef((function({title:e,titleId:t,size:n,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?qe[n]:n:"16px","aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#fff",d:"M15.35 59.08h-1.779c-.684 0-1.238-.578-1.238-1.291v-34.83c0-.713.554-1.291 1.238-1.291h1.779c.684 0 1.238.578 1.238 1.291v34.83c0 .713-.554 1.291-1.238 1.291zM58.46 59.08h-1.779c-.684 0-1.238-.713-1.238-1.593v-32.97c0-.88.554-1.593 1.238-1.593h1.779c.684 0 1.238.713 1.238 1.593v32.97c0 .88-.555 1.593-1.238 1.593z"}),r.createElement("path",{fill:"#fcea2b",d:"M7.45 43.47h7.743L7.45 51.213z"}),r.createElement("path",{fill:"#3F3F3F",d:"M15.19 43.47h12.34l-7.743 7.743-12.34-.058z"}),r.createElement("path",{fill:"#fcea2b",d:"M27.48 43.47h12.34l-7.743 7.743h-12.29z"}),r.createElement("path",{fill:"#3F3F3F",d:"M39.82 43.47h12.34l-7.743 7.743h-12.34z"}),r.createElement("path",{fill:"#fcea2b",d:"M52.16 43.47l11.89-.184-7.612 7.612h-11.7z"}),r.createElement("path",{fill:"#3F3F3F",d:"M64.05 43.29v7.612h-7.612z"}),r.createElement("path",{fill:"#fcea2b",d:"M7.95 28.33l7.646-.034-7.646 7.646z"}),r.createElement("path",{fill:"#3F3F3F",d:"M15.6 28.3h11.94l-7.695 7.646H7.955z"}),r.createElement("path",{fill:"#fcea2b",d:"M27.48 28.3h12.34l-7.743 7.743h-12.29z"}),r.createElement("path",{fill:"#3F3F3F",d:"M39.82 28.3h12.34l-7.743 7.743h-12.34z"}),r.createElement("path",{fill:"#fcea2b",d:"M52.16 28.3H64.5l-8.062 7.646-12.02.098z"}),r.createElement("path",{fill:"#3F3F3F",d:"M64.05 28.33v7.612h-7.612z"}),r.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2},r.createElement("path",{d:"M12.74 42.72v-6.348M16.92 50.9v6.509c0 .672-.545 1.217-1.217 1.217h-1.748a1.217 1.217 0 01-1.217-1.217v-6.071M16.92 36.37v6.348M12.74 28.24v-5.907m4.181 0v5.812M55.1 43.29v-6.921M59.28 51.34v6.071c0 .672-.545 1.217-1.217 1.217h-1.748a1.217 1.217 0 01-1.217-1.217V51.34M59.28 36.37v5.969M55.1 28.03v-5.891m4.181 0v5.796M7.95 28.33h56.1v7.612H7.95z"}),r.createElement("path",{d:"M7.95 43.29h56.1v7.612H7.95z"}),r.createElement("ellipse",{cx:14.83,cy:17.97,rx:4.594,ry:4.596}),r.createElement("ellipse",{cx:57.19,cy:17.97,rx:4.594,ry:4.596})),r.createElement("g",{fill:"#f4aa41",fillRule:"evenodd",stroke:"#e27022",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,transform:"translate(-2.525 -.094)"},r.createElement("ellipse",{cx:17.36,cy:18.06,rx:4.594,ry:4.596}),r.createElement("ellipse",{cx:59.71,cy:18.06,rx:4.594,ry:4.596})))})),Ge=()=>{const{createJupyterServer:e,deleteJupyterServer:t}=w();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Servers"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})}),(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(He.z,{onClick:t=>{t.preventDefault(),e("test1")},children:"Create Jupyter services"}),(0,s.jsx)(He.z,{onClick:e=>{e.preventDefault(),t("test1")},children:"Delete Jupyter services"})]})]})})},Qe=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Pools"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})})]})}),et=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Environments"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})})]})}),tt=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Content"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})})]})}),nt=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Usage"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})})]})}),st=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Billing"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})})]})}),rt=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsx)(Q.m.Title,{children:"Settings"}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsxs)(oe.Z,{children:[(0,s.jsx)(C.Z,{children:"This feature is being developed."}),(0,s.jsxs)(C.Z,{mt:3,children:["Follow progress on ",(0,s.jsx)(Y.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Xe,{size:200})})]})});var at=n(4633),it=n(54915),ot=n(14757);const lt=[{navigation:"Overview",icon:D.vJ3,href:"#overview"},{navigation:"Details",icon:D.Rg1,counter:3,href:"#projects"},{navigation:"Cards",icon:D.H0r,counter:"12",href:"#repositories"},{navigation:"Stars",icon:D.r7p,counter:"3",href:"#stars"},{navigation:"Activity",icon:D.sOM,counter:67,href:"#activity"}],ct=()=>{const{user:e}=v(),[t,n]=(0,r.useState)(0);return(0,s.jsxs)(C.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"flex-start"},children:[(0,s.jsxs)(C.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:[(0,s.jsx)(at.Z,{size:256,src:"https://avatars.githubusercontent.com/u/5007189?s=200&v=4",alt:"avatar"}),(0,s.jsxs)(C.Z,{children:[(0,s.jsxs)(C.Z,{sx:{paddingY:3},children:[(0,s.jsx)(it.Z,{as:"h1",sx:{fontSize:24},children:e?.displayName}),(0,s.jsx)(it.Z,{as:"h1",sx:{fontSize:20,fontWeight:300},children:e?.handle})]}),(0,s.jsx)(C.Z,{sx:{display:"flex",flexDirection:"column",color:"fg.onEmphasis"},children:(0,s.jsx)(He.z,{block:!0,children:"Edit Profile"})})]})]}),(0,s.jsxs)(C.Z,{sx:{flexGrow:1},children:[(0,s.jsx)(ot.J,{"aria-label":"Repository",children:lt.map(((e,r)=>(0,s.jsx)(ot.J.Item,{icon:e.icon,"aria-current":r===t?"page":void 0,onSelect:e=>{e.preventDefault(),n(r)},counter:e.counter,href:e.href,children:e.navigation},e.navigation)))}),(0,s.jsx)(C.Z,{sx:{border:"1px solid",marginTop:2,borderColor:"border.default",borderRadius:"12px",height:"300px",width:"80%",padding:4},children:(0,s.jsx)(q.Z,{children:" "})})]})]})},dt=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{children:(0,s.jsx)(Q.m,{children:(0,s.jsx)(Q.m.TitleArea,{variant:"large",children:(0,s.jsx)(Q.m.Title,{children:"Profile"})})})}),(0,s.jsx)(ct,{})]}),ht=()=>(0,s.jsx)(C.Z,{children:(0,s.jsx)("iframe",{src:"https://docs.datalayer.run",style:{width:"100%",height:"1000px",border:0}})}),ut={small:16,medium:32,large:64},mt=r.forwardRef((function({title:e,titleId:t,size:n,colored:s,...a},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 243.75 243.75",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:n?"string"==typeof n?ut[n]:n:"16px",ref:i,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("g",{fill:s?"#fff":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#fff")?"white":"currentColor",strokeWidth:2.928,transform:"translate(0 -308.268)"},r.createElement("circle",{cx:121.875,cy:430.143,r:120.411,stroke:"#000"}),r.createElement("path",{fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M119.675 477.588l.253-140.166c-73.532 5.11-86.696 84.242-28.25 114.7l.61 25.34z"}),r.createElement("path",{fillRule:"evenodd",stroke:"#000",d:"M120.07 482.652H93.813c-2.945 4.667-3.575 8.04 2.748 13.127-6.62.865-6.378 8.548-2.9 10.686-4.242 1.556-5.282 8.727 6.869 7.937l1.625 5.486c.733 2.113 1.746 2.545 2.76 2.973l10.458-.086c1.992-.72 4.299-2.105 4.39-5.015z"}),r.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",strokeLinecap:"round",strokeLinejoin:"round",d:"M124.291 477.462l-.469-139.95c73.532 5.11 86.696 84.458 28.25 114.916l-.61 25.34z"}),r.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",d:"M125.32 482.957l-.306 32.361c1.317 11.059 11.072 8.629 10.99-.61v-31.751zM139.957 482.957l-.305 32.361c1.317 11.059 11.072 8.629 10.99-.61v-31.751z"}),r.createElement("path",{fillRule:"evenodd",stroke:"#f8d05b",d:"M112.412 477.238l-16.948-73.934c-4.23-19.168-16.974-14.783-11.444-.557 6.267 10.896 28.39 21.763 33.582 6.106-4.523-5.743-6.628-12.59 1.333-16.65"}),r.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",strokeLinejoin:"round",d:"M131.627 399.814c1.778-4.471 12.628-9.482 19.487-14.062 7.117 3.213 17.741 13.145 12.804 25.555-1.265 4.901-28.05 4.544-30.224 2.137-4.481-4.606-3.115-10.024-2.067-13.63zM128.198 428.251c-.91 7.576-.577 13.909-.763 20.76 3.425.788 7.262.337 11.082-.062-2.75-6.95-5.704-13.748-10.319-20.698z"})))})),pt=e=>{const{version:t}=e,[n,a]=(0,r.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.m,{children:(0,s.jsxs)(Q.m.TitleArea,{variant:"large",children:[(0,s.jsxs)(Q.m.Title,{children:["Îž ðŸƒ Datalayer Run",(0,s.jsx)(J.Z,{sx:{marginLeft:1},children:t})]}),(0,s.jsx)(Q.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(q.Z,{children:"Datalayer Run scales your JupyterLab in the cloud with remote kernels and local files."})}),(0,s.jsx)(C.Z,{mt:3,style:{height:350},children:n?(0,s.jsx)(mt,{size:300,onClick:e=>a(!1)}):(0,s.jsx)("img",{src:"https://assets.datalayer.tech/releases/datalayer-0.2.0-omalley.png",onClick:e=>a(!0)})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(Y.Z,{href:"https://datalayer.tech/docs/releases/0.2.0-omalley",target:"_blank",children:(0,s.jsx)(q.Z,{as:"h4",children:"Datalayer 0.2.0 O'Malley Release"})})})]})},gt=e=>{const{user:t,setAuth:n}=v(),{me:o}=j(),[l,m]=(0,r.useState)("");return(0,r.useEffect)((()=>{const e=(()=>{const e=window.localStorage.getItem(h);if(e)try{const t=JSON.parse(e);return t.joinDate=new Date(t.joinDate),t}catch(e){return c}return c})(),t=window.localStorage.getItem(u)||d;e&&t&&(n(e,t),o(t)),(0,g.v)("config").then((e=>{console.log("----",e),m(e.version)})).catch((e=>{console.error(`Error while accessing the jupyter server datalayer_run extension.\n${e}`)}))}),[]),(0,s.jsx)(i.Jupyter,{startDefaultKernel:!1,children:(0,s.jsx)(a.Routes,{children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Route,{path:"/run",element:(0,s.jsx)(V,{content:(0,s.jsx)(Me,{...e})})}),(0,s.jsx)(a.Route,{path:"/run/debug",element:(0,s.jsx)(V,{content:(0,s.jsx)(Ue,{...e})})}),(0,s.jsx)(a.Route,{path:"/run/kernels",element:(0,s.jsx)(V,{content:(0,s.jsx)(Ye,{...e})})}),(0,s.jsx)(a.Route,{path:"/run/pools",element:(0,s.jsx)(V,{content:(0,s.jsx)(Qe,{})})}),(0,s.jsx)(a.Route,{path:"/run/environments",element:(0,s.jsx)(V,{content:(0,s.jsx)(et,{})})}),(0,s.jsx)(a.Route,{path:"/run/content",element:(0,s.jsx)(V,{content:(0,s.jsx)(tt,{})})}),(0,s.jsx)(a.Route,{path:"/run/severs",element:(0,s.jsx)(V,{content:(0,s.jsx)(Ge,{})})}),(0,s.jsx)(a.Route,{path:"/run/usage",element:(0,s.jsx)(V,{content:(0,s.jsx)(nt,{})})}),(0,s.jsx)(a.Route,{path:"/run/billing",element:(0,s.jsx)(V,{content:(0,s.jsx)(st,{})})}),(0,s.jsx)(a.Route,{path:"/run/settings",element:(0,s.jsx)(V,{content:(0,s.jsx)(rt,{})})}),(0,s.jsx)(a.Route,{path:"/run/profile",element:(0,s.jsx)(V,{content:(0,s.jsx)(dt,{})})}),(0,s.jsx)(a.Route,{path:"/run/docs",element:(0,s.jsx)(V,{content:(0,s.jsx)(ht,{})})}),(0,s.jsx)(a.Route,{path:"/run/logout",element:(0,s.jsx)(V,{content:(0,s.jsx)(Le,{})})}),(0,s.jsx)(a.Route,{path:"/run/about",element:(0,s.jsx)(V,{content:(0,s.jsx)(pt,{version:l})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Route,{path:"/run",element:(0,s.jsx)(B,{content:(0,s.jsx)(Re,{})})}),(0,s.jsx)(a.Route,{path:"/run/login",element:(0,s.jsx)(B,{content:(0,s.jsx)(ze,{})})}),(0,s.jsx)(a.Route,{path:"/run/join",element:(0,s.jsx)(B,{content:(0,s.jsx)(Oe,{})})}),(0,s.jsx)(a.Route,{path:"/run/join/confirm",element:(0,s.jsx)(B,{content:(0,s.jsx)(We,{})})}),(0,s.jsx)(a.Route,{path:"/run/join/welcome",element:(0,s.jsx)(B,{content:(0,s.jsx)(Ae,{})})}),(0,s.jsx)(a.Route,{path:"/run/password",element:(0,s.jsx)(B,{content:(0,s.jsx)(Ke,{})})}),(0,s.jsx)(a.Route,{path:"/run/password/confirm",element:(0,s.jsx)(B,{content:(0,s.jsx)(Ve,{})})}),(0,s.jsx)(a.Route,{path:"/run/password/welcome",element:(0,s.jsx)(B,{content:(0,s.jsx)($e,{})})})]})})})},ft=gt},57026:(e,t,n)=>{n.d(t,{A:()=>l,PV:()=>o,ls:()=>a});let s={iamServer:"https://dev1.datalayer.tech",operatorServer:"https://dev1.datalayer.tech"};const r=e=>{s.iamServer=e},a=()=>s.iamServer,i=e=>{s.operatorServer=e},o=()=>s.operatorServer,l=()=>{let e=Object.create({});const t=document.getElementById("datalayer-config-data");return t&&(e=JSON.parse(t.textContent||""),e.iamServer&&r(e.iamServer),e.operatorServer&&i(e.operatorServer)),e}},69252:(e,t,n)=>{n.d(t,{v:()=>a});var s=n(5987),r=n(32790);async function a(e="",t={}){const n=r.ServerConnection.makeSettings(),a=s.URLExt.join(n.baseUrl,"datalayer_run",e);let i;try{i=await r.ServerConnection.makeRequest(a,t,n)}catch(e){throw new r.ServerConnection.NetworkError(e)}let o=await i.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",i)}if(!i.ok)throw new r.ServerConnection.ResponseError(i,o.message||o);return o}},99088:(e,t,n)=>{n.r(t),n.d(t,{IDatalayerRun:()=>H,default:()=>q});var s=n(97930),r=n(94004),a=n(93172),i=n(61237),o=n(55354),l=n(38663),c=n(49910);const d=new(n(1339).zZ)({name:"@datalayer/icons:datalayer-green-padding",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" aria-hidden="true" viewBox="0 0 72 72">\n  <path fill="#2ecc71" stroke-width="2.9" d="M7 7h58v11.6H7zm0 0"/>\n  <path fill="#1abc9c" stroke-width="2.9" d="M7 30.2h58v11.6H7zm0 0"/>\n  <path fill="#16a085" stroke-width="2.9" d="M7 53.4h58V65H7zm0 0"/>\n</svg>\n'});var h,u,m,p=n(96697),g=n(53004),f=n(74901),x=n(5987),v=n(87717),_=n(18778),j=n(80845),w=n(74512);class y{constructor(e,t){this.sessionManager=e.sessionManager,this.specsManager=e.specsManager,this.translator=e.translator||o.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._path=e.path??s.UUID.uuid4(),this._type=e.type??"",this._name=e.name??"",this._setBusy=e.setBusy,this._kernelPreference=e.kernelPreference??{},this._serviceManager=t}get session(){return this._session??null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!s.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e,this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:s.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}sessionManager;specsManager;get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){const e=this.session?.kernel;return this._pendingKernelName===this.noKernelName?this.noKernelName:this._pendingKernelName?this.specsManager.specs?.kernelspecs[this._pendingKernelName]?.display_name??this._pendingKernelName:e?this.specsManager.specs?.kernelspecs[e.name]?.display_name??e.name:this.noKernelName}get kernelDisplayStatus(){const e=this.session?.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!e&&this._pendingKernelName?"initializing":e||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?("connected"===e?.connectionStatus?e?.status:e?.connectionStatus)??"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)})),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),f.Signal.clearData(this))}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&!1===e.shouldStart)return!0;let t;if(e.id)t={id:e.id};else{const n=h.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});n&&(t={name:n})}if(t)try{return await this._changeKernel(t),!1}catch(e){}return!0}async restartKernel(){const e=this.session?.kernel||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(this.session?.kernel?.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit(this.session?.kernel?.status||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:this.session?.kernel||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=(0,p.find)(e.running(),(e=>e.path===this._path));if(t)try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(e){return this._handleSessionError(e),Promise.reject(e)}return await this._startIfNecessary()}async _shutdownSession(){const e=this._session,t=this._isTerminating,n=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(e?.shutdown()),this._isTerminating=!1,e?.dispose(),this._session=null;const t=e?.kernel||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:e,newValue:null})}catch(s){this._isTerminating=t,this._isReady=n;const r=e?.kernel?.status;throw void 0===r?this._statusChanged.emit("unknown"):this._statusChanged.emit(r),s}}async _startIfNecessary(){const e=this.kernelPreference;return!this.isDisposed&&!this.session?.kernel&&!1!==e.shouldStart&&!1!==e.canStart&&this.startKernel()}async _changeKernel(e={}){if(e.name?.startsWith("remote-")){const t=e.name.replace("remote-","");console.log("---",this._name,this._path);const n=await this._serviceManager.getRemoteKernelSession(t,this._path,this._name);return this._handleNewSession(n)}if(e.name&&(this._pendingKernelName=e.name),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._session&&!this._isTerminating)try{return await this._session.changeKernel(e),this._session.kernel}catch(e){throw this._handleSessionError(e),e}const t=x.PathExt.dirname(this._path),n=this._pendingSessionRequest=x.PathExt.join(t,s.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:n,type:this._type,name:this._name,kernel:e});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(e){throw this._handleSessionError(e),e}}_handleNewSession(e){if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=e.kernel?.name??"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:e?.kernel||null,name:"kernel"}),this._statusChanged.emit(e?.kernel?.status||"unknown"),e?.kernel||null}async _handleSessionError(e){this._handleNewSession(null);let t="",n="";try{t=e.traceback,n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=(0,w.jsxs)("div",{children:[e&&(0,w.jsx)("pre",{children:e}),t&&(0,w.jsx)("details",{className:"jp-mod-wide",children:(0,w.jsx)("pre",{children:t})})]}),s=this._dialog=new a.Dialog({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[a.Dialog.okButton()]});await s.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){if("dead"===t){const t=e.kernel?.model;if(t?.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}_path="";_name="";_type="";_prevKernelName="";_kernelPreference;_isDisposed=!1;_disposed=new f.Signal(this);_session=null;_ready=new s.PromiseDelegate;_initializing=!1;_initStarted=new s.PromiseDelegate;_initPromise=new s.PromiseDelegate;_isReady=!1;_isTerminating=!1;_isRestarting=!1;_kernelChanged=new f.Signal(this);_preferenceChanged=new f.Signal(this);_sessionChanged=new f.Signal(this);_statusChanged=new f.Signal(this);_connectionStatusChanged=new f.Signal(this);translator;_trans;_pendingInput=!1;_iopubMessage=new f.Signal(this);_unhandledMessage=new f.Signal(this);_propertyChanged=new f.Signal(this);_dialog=null;_setBusy;_busyDisposable=null;_serviceManager;_pendingKernelName="";_pendingSessionRequest=""}!function(e){e.getDefaultKernel=function(e){const{preference:t}=e,{shouldStart:n}=t;return!1===n?null:h.getDefaultKernel(e)}}(y||(y={}));class C{constructor(e={},t){this._translator=e.translator??o.nullTranslator,this._multiServiceManager=t}async selectKernel(e){if(e.isDisposed)return Promise.resolve();const t=this._translator.load("jupyterlab");let n=t.__("Cancel");e.hasNoKernel&&(n=e.kernelDisplayName);const s=[a.Dialog.cancelButton({label:n}),a.Dialog.okButton({label:t.__("Select"),ariaLabel:t.__("Select Kernel")})],r=e.kernelPreference.autoStartDefault,i="boolean"==typeof r,o=new a.Dialog({title:t.__("Select Kernel"),body:new h.KernelSelector(e,this._multiServiceManager,this._translator),buttons:s,checkbox:i?{label:t.__("Always start the preferred kernel"),caption:t.__("Remember my choice and always start the preferred kernel"),checked:r}:null}),l=await o.launch();if(e.isDisposed||!l.button.accept)return;i&&null!==l.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:l.isChecked});const c=l.value;if(null===c&&!e.hasNoKernel)return e.shutdown();c&&await e.changeKernel(c)}async restart(e){const t=this._translator.load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const n=e.session?.kernel;if(!n&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!n)throw new Error("No kernel to restart");const s=a.Dialog.warnButton({label:t.__("Restart"),ariaLabel:t.__("Confirm Kernel Restart")}),r=await(0,a.showDialog)({title:t.__("Restart Kernel?"),body:t.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[a.Dialog.cancelButton({ariaLabel:t.__("Cancel Kernel Restart")}),s]});return!n.isDisposed&&!!r.button.accept&&(await e.restartKernel(),!0)}_translator;_multiServiceManager}!function(e){class t extends _.Widget{constructor(e,t,s){super({node:n(e,t,s)})}getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}function n(e,t,n){const r=(n=n||o.nullTranslator).load("jupyterlab"),a=document.createElement("div"),i=document.createElement("label");i.textContent=`${r.__("Select kernel for:")} "${e.name}"`,a.appendChild(i);const l=function(e){return{specs:e.specsManager.specs,sessions:e.sessionManager.running(),preference:e.kernelPreference}}(e),c=document.createElement("select");return s(c,l,t,n,e.hasNoKernel?null:e.kernelDisplayName),a.appendChild(c),a}function s(e,t,n,s,l=null){for(;e.firstChild;)e.removeChild(e.firstChild);const{preference:c,sessions:d,specs:h}=t,{name:u,id:m,language:p,canStart:g,shouldStart:f}=c,x=(s=s||o.nullTranslator).load("jupyterlab");if(!h||!1===g)return e.appendChild(a(s)),e.value="null",void(e.disabled=!0);e.disabled=!1;const v=Object.create(null),_=Object.create(null);for(const e in h.kernelspecs){const t=h.kernelspecs[e];v[e]=t.display_name,_[e]=t.language}const j=[];if(u&&u in h.kernelspecs&&j.push(u),u&&j.length>0&&p)for(const e in h.kernelspecs)u!==e&&_[e]===p&&j.push(e);if(j.length||j.push(h.default),n.remote){const t=document.createElement("optgroup");t.label=x.__("Start Remote Kernel"),Array.from(n.remote.kernels.running()).map((e=>{t.appendChild(r(`remote-${e.name}`,e.name))})),t.firstChild&&e.appendChild(t)}const w=document.createElement("optgroup");w.label=x.__("Start Preferred Kernel"),j.sort(((e,t)=>v[e].localeCompare(v[t])));for(const e of j)w.appendChild(r(e,v[e]));w.firstChild&&e.appendChild(w),e.appendChild(a(s));const y=document.createElement("optgroup");y.label=x.__("Start Other Kernel");const C=[];for(const e in h.kernelspecs)-1===j.indexOf(e)&&C.push(e);C.sort(((e,t)=>v[e].localeCompare(v[t])));for(const e of C)y.appendChild(r(e,v[e]));if(C.length&&e.appendChild(y),!1===f)e.value="null";else{let t=0;l&&(t=[...e.options].findIndex((e=>e.text===l)),t=Math.max(t,0)),e.selectedIndex=t}if(!d)return;const b=[],k=[];for(const e of d)p&&e.kernel&&_[e.kernel.name]===p&&e.kernel.id!==m?b.push(e):e.kernel?.id!==m&&k.push(e);const F=document.createElement("optgroup");if(F.label=x.__("Use Kernel from Preferred Session"),e.appendChild(F),b.length){b.sort(((e,t)=>e.path.localeCompare(t.path)));for(const e of b){const t=e.kernel?v[e.kernel.name]:"";F.appendChild(i(e,t,s))}}const S=document.createElement("optgroup");if(S.label=x.__("Use Kernel from Other Session"),e.appendChild(S),k.length){k.sort(((e,t)=>e.path.localeCompare(t.path)));for(const e of k){const t=e.kernel?v[e.kernel.name]||e.kernel.name:"";S.appendChild(i(e,t,s))}}}function r(e,t){const n=document.createElement("option");return n.text=t,n.value=JSON.stringify({name:e}),n}function a(e){const t=(e=e||o.nullTranslator).load("jupyterlab"),n=document.createElement("optgroup");n.label=t.__("Use No Kernel");const s=document.createElement("option");return s.text=t.__("No Kernel"),s.value="null",n.appendChild(s),n}function i(e,t,n){const s=(n=n||o.nullTranslator).load("jupyterlab"),r=document.createElement("option"),a=e.name||x.PathExt.basename(e.path);return r.text=a,r.value=JSON.stringify({id:e.kernel?.id}),r.title=`${s.__("Path:")} ${e.path}\n${s.__("Name:")} ${a}\n${s.__("Kernel Name:")} ${t}\n${s.__("Kernel Id:")} ${e.kernel?.id}`,r}e.KernelSelector=t,e.getDefaultKernel=function(e){const{specs:t,preference:n}=e,{name:s,language:r,canStart:a,autoStartDefault:i}=n;if(!t||!1===a)return null;const o=i?t.default:null;if(!s&&!r)return o;for(const e in t.kernelspecs)if(e===s)return s;if(!r)return o;const l=[];for(const e in t.kernelspecs){const n=t.kernelspecs[e]?.language;r===n&&l.push(e)}if(1===l.length){const e=l[0];return console.warn("No exact match found for "+e+", using kernel "+e+" that matches language="+r),e}return o},e.populateKernelSelect=s}(h||(h={}));class b{constructor(e){const t=this._manager=e.manager;this.translator=e.translator||o.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._factory=e.factory,this._dialogs=e.sessionDialogs??new a.SessionContextDialogs({translator:e.translator}),this._opener=e.opener||u.noOp,this._path=this._manager.contents.normalize(e.path),this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const n=this._manager.contents.localPath(this._path),s=this._factory.preferredLanguage(x.PathExt.basename(n)),r=this._manager.contents.getSharedModelFactory(this._path),i=r?.createNew({path:n,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:s,sharedModel:i,collaborationEnabled:r?.collaborative??!1}),this._readyPromise=t.ready.then((()=>this._populatedPromise.promise));const l=x.PathExt.extname(this._path);this.sessionContext=new y({sessionManager:t.sessions,specsManager:t.kernelspecs,path:n,type:".ipynb"===l?"notebook":"file",name:x.PathExt.basename(n),kernelPreference:e.kernelPreference||{shouldStart:!1},setBusy:e.setBusy},t),this.sessionContext.propertyChanged.connect(this._onSessionChanged,this),t.contents.fileChanged.connect(this._onFileChanged,this),this.urlResolver=new j.RenderMimeRegistry.UrlResolver({path:this._path,contents:t.contents})}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}sessionContext;get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel?{...this._contentsModel}:null}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessionContext.dispose(),this._model.dispose(),this._model.sharedModel.dispose(),this._disposed.emit(void 0),f.Signal.clearData(this))}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){return!(!this._contentsModel?.writable||this._model.collaborative)}urlResolver;async initialize(e){e?await this._save():await this._revert(),this.model.sharedModel.clearUndoHistory()}rename(e){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(e)))))}async save(){await this.ready,await this._save()}async saveAs(){await this.ready;const e=this._manager.contents.localPath(this.path),t=await u.getSavePath(e);if(this.isDisposed||!t)return;const n=this._manager.contents.driveName(this.path),s=""==n?t:`${n}:${t}`;if(s===this._path)return this.save();try{await this._manager.ready,await this._manager.contents.get(s),await this._maybeOverWrite(s)}catch(e){if(!e.response||404!==e.response.status)throw e;await this._finishSaveAs(s)}}async download(){const e=await this._manager.contents.getDownloadUrl(this._path),t=document.createElement("a");t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}async revert(){await this.ready,await this._revert()}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then((()=>e.createCheckpoint(this._path)))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then((()=>t.deleteCheckpoint(this._path,e)))}restoreCheckpoint(e){const t=this._manager.contents,n=this._path;return this._manager.ready.then((()=>e?t.restoreCheckpoint(n,e):this.listCheckpoints().then((s=>{if(!this.isDisposed&&s.length)return e=s[s.length-1].id,t.restoreCheckpoint(n,e)}))))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then((()=>e.listCheckpoints(this._path)))}addSibling(e,t={}){const n=this._opener;return n&&n(e,t),new v.DisposableDelegate((()=>{e.close()}))}_onFileChanged(e,t){if("rename"!==t.type)return;let n=t.oldValue&&t.oldValue.path,s=t.newValue&&t.newValue.path;if(s&&0===this._path.indexOf(n||"")){let e=t.newValue;n!==this._path&&(s=this._path.replace(new RegExp(`^${n}/`),`${s}/`),n=this._path,e={last_modified:t.newValue?.created,path:s}),this._updateContentsModel({...this._contentsModel,...e}),this._updatePath(s)}}_onSessionChanged(e,t){if("path"!==t)return;const n=this._manager.contents.driveName(this.path);let s=this.sessionContext.session.path;n&&(s=`${n}:${s}`),this._updatePath(s)}_updateContentsModel(e){const t=e.writable&&!this._model.collaborative,n={path:e.path,name:e.name,type:e.type,writable:t,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format},s=this._contentsModel?.last_modified??null;this._contentsModel=n,s&&n.last_modified===s||this._fileChanged.emit(n)}_updatePath(e){if(this._path===e)return;this._path=e;const t=this._manager.contents.localPath(e),n=x.PathExt.basename(t);if(this.sessionContext.session?.path!==t&&this.sessionContext.session?.setPath(t),this.sessionContext.session?.name!==n&&this.sessionContext.session?.setName(n),this.urlResolver.path!==e&&(this.urlResolver.path=e),this._contentsModel&&(this._contentsModel.path!==e||this._contentsModel.name!==n)){const t={...this._contentsModel,name:n,path:e};this._updateContentsModel(t)}this._pathChanged.emit(e)}async _populate(){if(this._isPopulated=!0,this._isReady=!0,this._populatedPromise.resolve(void 0),await this._maybeCheckpoint(!1),this.isDisposed)return;const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:e,language:this._model.defaultKernelLanguage},this.sessionContext.initialize().then((e=>{e&&this._dialogs.selectKernel(this.sessionContext)}))}async _rename(e){const t=this.localPath.split("/");t[t.length-1]=e;let n=x.PathExt.join(...t);const s=this._manager.contents.driveName(this.path);s&&(n=`${s}:${n}`),await this._manager.contents.rename(this.path,n)}async _save(){this._saveState.emit("started");const e=this._createSaveOptions();try{await this._manager.ready;const t=await this._maybeSave(e);if(this.isDisposed)return;this._model.dirty=!1,this._updateContentsModel(t),this._isPopulated||await this._populate(),this._saveState.emit("completed")}catch(e){const{name:t}=e;if("ModalCancelError"===t||"ModalDuplicateError"===t)throw e;const n=this._manager.contents.localPath(this._path),s=x.PathExt.basename(n);throw this._handleError(e,this._trans.__("File Save Error for %1",s)),this._saveState.emit("failed"),e}}_revert(e=!1){const t={type:this._factory.contentType,content:null!==this._factory.fileFormat,...null!==this._factory.fileFormat?{format:this._factory.fileFormat}:{}},n=this._path,s=this._model;return this._manager.ready.then((()=>this._manager.contents.get(n,t))).then((e=>{if(!this.isDisposed){if(e.content)if("json"===e.format)s.fromJSON(e.content);else{let t=e.content;-1!==t.indexOf("\r\n")?(this._lineEnding="\r\n",t=t.replace(/\r\n/g,"\n")):-1!==t.indexOf("\r")?(this._lineEnding="\r",t=t.replace(/\r/g,"\n")):this._lineEnding=null,s.fromString(t)}return this._updateContentsModel(e),s.dirty=!1,this._isPopulated?void 0:this._populate()}})).catch((async e=>{const t=this._manager.contents.localPath(this._path),n=x.PathExt.basename(t);throw this._handleError(e,this._trans.__("File Load Error for %1",n)),e}))}_maybeSave(e){const t=this._path;return this._manager.contents.get(t,{content:!1}).then((n=>{if(this.isDisposed)return Promise.reject(new Error("Disposed"));const s=this._lastModifiedCheckMargin,r=this.contentsModel?.last_modified,a=r?new Date(r):new Date,i=new Date(n.last_modified);return r&&i.getTime()-a.getTime()>s?this._timeConflict(a,n,e):this._manager.contents.save(t,e)}),(n=>{if(n.response&&404===n.response.status)return this._manager.contents.save(t,e);throw n}))}async _handleError(e,t){await(0,a.showErrorMessage)(t,e)}_maybeCheckpoint(e){let t=Promise.resolve(void 0);return this.canSave?(t=e?this.createCheckpoint().then():this.listCheckpoints().then((e=>{if(!this.isDisposed&&!e.length&&this.canSave)return this.createCheckpoint().then()})),t.catch((e=>{if(!e.response||403!==e.response.status)throw e}))):t}_timeConflict(e,t,n){const s=new Date(t.last_modified);if(console.warn(`Last saving performed ${e} while the current file seems to have been saved ${s}`),this._timeConflictModalIsOpen){const e=new Error("Modal is already displayed");return e.name="ModalDuplicateError",Promise.reject(e)}const r=this._trans.__('"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?',this.path),i=a.Dialog.okButton({label:this._trans.__("Revert"),actions:["revert"]}),o=a.Dialog.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});return this._timeConflictModalIsOpen=!0,(0,a.showDialog)({title:this._trans.__("File Changed"),body:r,buttons:[a.Dialog.cancelButton(),i,o]}).then((e=>{if(this._timeConflictModalIsOpen=!1,this.isDisposed)return Promise.reject(new Error("Disposed"));if(e.button.actions.includes("overwrite"))return this._manager.contents.save(this._path,n);if(e.button.actions.includes("revert"))return this.revert().then((()=>t));const s=new Error("Cancel");return s.name="ModalCancelError",Promise.reject(s)}))}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e),n=a.Dialog.warnButton({label:this._trans.__("Overwrite"),accept:!0});return(0,a.showDialog)({title:this._trans.__("File Overwrite?"),body:t,buttons:[a.Dialog.cancelButton(),n]}).then((t=>this.isDisposed?Promise.reject(new Error("Disposed")):t.button.accept?this._manager.contents.delete(e).then((()=>this._finishSaveAs(e))):void 0))}async _finishSaveAs(e){this._saveState.emit("started");try{await this._manager.ready;const t=this._createSaveOptions();await this._manager.contents.save(e,t),await this._maybeCheckpoint(!0),this._saveState.emit("completed")}catch(e){if("Cancel"===e.message||"Modal is already displayed"===e.message)throw e;const t=this._manager.contents.localPath(this._path),n=x.PathExt.basename(t);return this._handleError(e,this._trans.__("File Save Error for %1",n)),void this._saveState.emit("failed")}}_createSaveOptions(){let e=null;return"json"===this._factory.fileFormat?e=this._model.toJSON():(e=this._model.toString(),this._lineEnding&&(e=e.replace(/\n/g,this._lineEnding))),{type:this._factory.contentType,format:this._factory.fileFormat,content:e}}translator;_isReady=!1;_isDisposed=!1;_isPopulated=!1;_trans;_manager;_opener;_model;_path="";_lineEnding=null;_factory;_contentsModel=null;_readyPromise;_populatedPromise=new s.PromiseDelegate;_pathChanged=new f.Signal(this);_fileChanged=new f.Signal(this);_saveState=new f.Signal(this);_disposed=new f.Signal(this);_dialogs;_lastModifiedCheckMargin=500;_timeConflictModalIsOpen=!1}!function(e){e.getSavePath=function(e,n){const s=(n=n||o.nullTranslator).load("jupyterlab"),r=a.Dialog.okButton({label:s.__("Save"),accept:!0});return(0,a.showDialog)({title:s.__("Save File Asâ€¦"),body:new t(e),buttons:[a.Dialog.cancelButton(),r]}).then((e=>{if(e.button.accept)return e.value??void 0}))},e.noOp=function(){};class t extends _.Widget{constructor(e){super({node:n(e)})}getValue(){return this.node.value}}function n(e){const t=document.createElement("input");return t.value=e,t}}(u||(u={}));class k{constructor(e){this.translator=e.translator||o.nullTranslator,this.registry=e.registry,this.services=e.manager,this._dialogs=e.sessionDialogs??new a.SessionContextDialogs({translator:e.translator}),this._isConnectedCallback=e.isConnectedCallback||(()=>!0),this._opener=e.opener,this._when=e.when||e.manager.ready;const t=new i.DocumentWidgetManager({registry:this.registry,translator:this.translator});t.activateRequested.connect(this._onActivateRequested,this),t.stateChanged.connect(this._onWidgetStateChanged,this),this._widgetManager=t,this._setBusy=e.setBusy}registry;services;get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){if(this._autosave!==e){const t=this._autosave;this._autosave=e,this._contexts.forEach((t=>{const n=m.saveHandlerProperty.get(t);n&&(!0!==e||n.isActive?!1===e&&n.isActive&&n.stop():n.start())})),this._stateChanged.emit({name:"autosave",oldValue:t,newValue:e})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){if(this._autosaveInterval!==e){const t=this._autosaveInterval;this._autosaveInterval=e,this._contexts.forEach((t=>{const n=m.saveHandlerProperty.get(t);n&&(n.saveInterval=e||120)})),this._stateChanged.emit({name:"autosaveInterval",oldValue:t,newValue:e})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(e){if(this._widgetManager.confirmClosingDocument!==e){const t=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=e,this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){if(this._lastModifiedCheckMargin!==e){const t=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=e,this._contexts.forEach((t=>{t.lastModifiedCheckMargin=e})),this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:t,newValue:e})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(e){if(this._renameUntitledFileOnSave!==e){const t=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=e,this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,f.Signal.clearData(this),this._contexts.forEach((e=>this._widgetManager.closeWidgets(e))),this._widgetManager.dispose(),this._contexts.length=0)}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map((e=>this._widgetManager.closeWidgets(e)))).then((()=>{}))}closeFile(e){const t=this._contextsForPath(e).map((e=>this._widgetManager.closeWidgets(e)));return Promise.all(t).then((e=>{}))}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",n){return this._createOrOpenDocument("create",e,t,n)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then((()=>this.services.contents.delete(e))).then((()=>(this._contextsForPath(e).forEach((e=>this._widgetManager.deleteWidgets(e))),Promise.resolve(void 0))))}duplicate(e){const t=x.PathExt.dirname(e);return this.services.contents.copy(e,t)}findWidget(e,t="default"){const n=x.PathExt.normalize(e);let s=[t];if("default"===t){const e=this.registry.defaultWidgetFactory(n);if(!e)return;s=[e.name]}else null===t&&(s=this.registry.preferredWidgetFactories(n).map((e=>e.name)));for(const e of this._contextsForPath(n))for(const t of s)if(null!==t){const n=this._widgetManager.findWidget(e,t);if(n)return n}}newUntitled(e){return"file"===e.type&&(e.ext=e.ext||".txt"),this.services.contents.newUntitled(e)}open(e,t="default",n,s){return this._createOrOpenDocument("open",e,t,n,s)}openOrReveal(e,t="default",n,s){const r=this.findWidget(e,t);return r?(this._opener.open(r,{type:t,...s}),r):this.open(e,t,n,s??{})}overwrite(e,t){const n=`${t}.${s.UUID.uuid4()}`,r=()=>this.rename(n,t);return this.rename(e,n).then((()=>this.deleteFile(t))).then(r,r)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const n=this.services.contents.normalize(e);return(0,p.find)(this._contexts,(e=>e.path===n&&e.factoryName===t))}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter((e=>e.path===t))}_createContext(e,t,n){const s=new b({opener:(e,t)=>{this._widgetManager.adoptWidget(s,e),this._opener.open(e,t)},manager:this.services,factory:t,path:e,kernelPreference:n,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator}),r=new i.SaveHandler({context:s,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});return m.saveHandlerProperty.set(s,r),s.ready.then((()=>{this.autosave&&r.start()})),s.disposed.connect(this._onContextDisposed,this),this._contexts.push(s),s}_onContextDisposed(e){p.ArrayExt.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:n}=this;if("default"===t){const s=n.defaultWidgetFactory(e);if(!s)return;t=s.name}return n.getWidgetFactory(t)}_createOrOpenDocument(e,t,n="default",s,r){const a=this._widgetFactoryFor(t,n);if(!a)return;const i=a.modelName||"text",o=this.registry.getModelFactory(i);if(!o)return;const l=this.registry.getKernelPreference(t,a.name,s);let c,d=Promise.resolve(void 0);if("open"===e)c=this._findContext(t,o.name)||null,c||(c=this._createContext(t,o,l),d=this._when.then((()=>c.initialize(!1))));else{if("create"!==e)throw new Error(`Invalid argument 'which': ${e}`);c=this._createContext(t,o,l),d=this._when.then((()=>c.initialize(!0)))}const h=this._widgetManager.createWidget(a,c);return this._opener.open(h,{type:a.name,...r}),d.catch((e=>{console.error(`Failed to initialize the context with '${o.name}' for ${t}`,e),h.close()})),h}_onActivateRequested(e,t){this._activateRequested.emit(t)}_onWidgetStateChanged(e,t){"confirmClosingDocument"===t.name&&this._stateChanged.emit(t)}translator;_activateRequested=new f.Signal(this);_contexts=[];_opener;_widgetManager;_isDisposed=!1;_autosave=!0;_autosaveInterval=120;_lastModifiedCheckMargin=500;_renameUntitledFileOnSave=!0;_when;_setBusy;_dialogs;_isConnectedCallback;_stateChanged=new f.Signal(this)}!function(e){e.saveHandlerProperty=new g.AttachedProperty({name:"saveHandler",create:()=>{}})}(m||(m={}));var F=n(29018);class S{_serviceManagerLocal;_serviceManagerRemote;_remoteSessions=new Map;constructor(e){this._serviceManagerLocal=e}get local(){return this._serviceManagerLocal}set remote(e){this._serviceManagerRemote=e}get remote(){return this._serviceManagerRemote}get isReady(){return this._serviceManagerLocal.isReady}get ready(){return this._serviceManagerLocal.ready}get connectionFailure(){return this._serviceManagerLocal.connectionFailure}get isDisposed(){return this._serviceManagerLocal.isDisposed}get builder(){return this._serviceManagerLocal.builder}get contents(){return this._serviceManagerLocal.contents}get events(){return this._serviceManagerLocal.events}get serverSettings(){return this._serviceManagerLocal.serverSettings}get sessions(){return this._serviceManagerLocal.sessions}get kernels(){return this._serviceManagerLocal.kernels}get kernelspecs(){return this._serviceManagerLocal.kernelspecs}get settings(){return this._serviceManagerLocal.settings}get terminals(){return this._serviceManagerLocal.terminals}get user(){return this._serviceManagerLocal.user}get workspaces(){return this._serviceManagerLocal.workspaces}get nbconvert(){return this._serviceManagerLocal.nbconvert}dispose(){this._serviceManagerLocal.dispose()}async getRemoteKernelSession(e,t,n){const s=this._remoteSessions.get(e);if(s){if(s.path===t)return s;const e=this._serviceManagerRemote?.sessions.connectTo({model:{...s.model,path:t},kernelConnectionOptions:{handleComms:!0}});return e}const r=await(0,F.SX)(this._serviceManagerRemote,e,t,n);return r&&this._remoteSessions.set(e,r),r}}var M=n(69252),D=n(5795),E=n(11033);class Z extends a.ReactWidget{_app;constructor(e,t){super(),this._app=e,this.addClass("dla-Container")}render(){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(E.Z,{adapter:D.JupyterLabAppAdapter.create(this._app)})})}}var P=n(16154),R=n(81580),T=n(32790);const I="FileSystem",N=`${I}:`;async function z(e){const t=[];for await(const n of e)t.push(n);return t}class L{get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,f.Signal.clearData(this))}get name(){return I}get serverSettings(){return T.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get rootHandle(){return this._rootHandle}set rootHandle(e){this._rootHandle=e}async get(e,t){if(e=this.cleanPath(e),!this._rootHandle)return{name:"",path:"",created:(new Date).toISOString(),last_modified:(new Date).toISOString(),format:null,mimetype:"",content:null,writable:!0,type:"directory"};const n=await this.getParentHandle(e),s=x.PathExt.dirname(e),r=x.PathExt.basename(e);let a;if(a=r?await this.getHandle(n,r):n,"file"===a.kind)return this.getFileModel(a,s,!0);{const e=[];for await(const t of a.values())"file"===t.kind?e.push(await this.getFileModel(t,x.PathExt.join(s,r))):e.push({name:t.name,path:x.PathExt.join(s,r,t.name),created:"",last_modified:"",format:null,mimetype:"",content:null,writable:!0,type:"directory"});return{name:r,path:x.PathExt.join(s,r),last_modified:"",created:"",format:null,mimetype:"",content:e,size:void 0,writable:!0,type:"directory"}}}async getDownloadUrl(e){throw new Error("Method not implemented.")}async newUntitled(e){let t="";e&&e.path&&(t=this.cleanPath(e.path));const n=e?.type||"directory",s=x.PathExt.join(t,"directory"===n?"Untitled Folder":"untitled"),r=e?.ext||"txt",a=await this.getParentHandle(s);let i=x.PathExt.basename(s);const o=i;let l;if("directory"===n){let e=1;for(;await this.hasHandle(a,i);)i=`${o} ${e++}`;await a.getDirectoryHandle(i,{create:!0}),l=await this.get(x.PathExt.join(t,i))}else{let e=1;for(;await this.hasHandle(a,`${i}.${r}`);)i=`${o}${e++}`;const n=`${i}.${r}`;await a.getFileHandle(n,{create:!0}),l=await this.get(x.PathExt.join(t,n))}return this._fileChanged.emit({type:"new",oldValue:null,newValue:l}),l}async delete(e){e=this.cleanPath(e);const t=await this.getParentHandle(e);await t.removeEntry(x.PathExt.basename(e),{recursive:!0}),this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){e=this.cleanPath(e),t=this.cleanPath(t),await this.doCopy(e,t),await this.delete(e);const n=this.get(t);return n.then((t=>{this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:t})})),n}async save(e,t){e=this.cleanPath(e);const n=await this.getParentHandle(e);if("directory"===t?.type)return await n.getDirectoryHandle(x.PathExt.basename(e),{create:!0}),this.get(e);const s=await n.getFileHandle(x.PathExt.basename(e),{create:!0}),r=await s.createWritable({}),a=t?.format,i=t?.content;if("json"===a){const e=JSON.stringify(i,null,2);await r.write(e)}else if("base64"===a){const e=await function(e,t="text/plain;charset=UTF-8"){return fetch(`data:${t};base64,`+e).then((e=>e.blob()))}(i);await r.write(e)}else await r.write(i);return await r.close(),this.get(e)}async copy(e,t){e=this.cleanPath(e);const n=await this.get(e),s=x.PathExt.dirname(e);let r=n.name;if(s===t){const e=x.PathExt.extname(n.name);r=e?`${r.slice(0,r.length-e.length)} (Copy)${e}`:`${r} (Copy)`}const a=x.PathExt.join(t,r);return await this.doCopy(e,a),this.get(a)}async createCheckpoint(e){return{id:"test",last_modified:(new Date).toISOString()}}async listCheckpoints(e){return[{id:"test",last_modified:(new Date).toISOString()}]}restoreCheckpoint(e,t){return Promise.resolve(void 0)}deleteCheckpoint(e,t){return Promise.resolve(void 0)}async getParentHandle(e){const t=this._rootHandle;if(!t)throw new Error("No root file handle");let n=t;for(const t of e.split("/").slice(0,-1))n=await n.getDirectoryHandle(t);return n}async getHandle(e,t){const n=(await z(e.values())).filter((e=>e.name===t));if(n.length)return n[0];throw new Error(`${t} does not exist.`)}async hasHandle(e,t){const n=(await z(e.values())).filter((e=>e.name===t));return Boolean(n.length)}async getFileModel(e,t,n){const s=await e.getFile();let r,a=null;return r=s.type&&s.type.split("/")&&["image","audio","video"].includes(s.type.split("/")[0])?"base64":"text",n&&(a="base64"===r?function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}(await s.arrayBuffer()):await s.text()),{name:s.name,path:x.PathExt.join(t,s.name),created:new Date(s.lastModified).toISOString(),last_modified:new Date(s.lastModified).toISOString(),format:r,content:a,writable:!0,type:"file",mimetype:s.type}}async doCopy(e,t){const n=await this.getParentHandle(e),s=x.PathExt.basename(e);let r;r=s?await this.getHandle(n,s):n;const a=await this.getParentHandle(t),i=x.PathExt.basename(t);if("directory"===r.kind){await a.getDirectoryHandle(i,{create:!0});for await(const n of r.values())await this.doCopy(x.PathExt.join(e,n.name),x.PathExt.join(t,n.name))}else{const e=await a.getFileHandle(i,{create:!0}),t=await e.createWritable({}),n=await r.getFile(),s=await n.arrayBuffer();t.write(s),await t.close()}}cleanPath(e){return e.includes(N)?e.replace(N,""):e}_isDisposed=!1;_fileChanged=new f.Signal(this);_rootHandle=null}const O="FileSystemAccess",W={id:"@datalayer/run:local-drive",requires:[P.IFileBrowserFactory,o.ITranslator],optional:[l.ISettingRegistry,a.IToolbarWidgetRegistry],autoStart:!0,activate:(e,t,n,s,r)=>{const i=window.showDirectoryPicker;if(!i)return void console.warn("The File System Access APII is not supported in this browser.");const{serviceManager:l}=e,{createFileBrowser:c}=t,d=n.load("jupyterlab-filesystem-access"),h=new L;l.contents.addDrive(h);const u=c("jp-filesystem-browser",{driveName:h.name,restore:!1});u.title.caption=d.__("Local File System"),u.title.icon=R.listIcon,u.showFileCheckboxes=!1;const m=u.toolbar;m.id="jp-filesystem-toolbar",r&&s&&((0,a.setToolbar)(m,(0,a.createToolbarFactory)(r,s,O,W.id,n??o.nullTranslator),m),r.addFactory(O,"open-folder",(e=>new a.ToolbarButton({icon:R.folderIcon,onClick:async()=>{const e=await i();e&&(h.rootHandle=e,u.model.cd("/"))},tooltip:d.__("Open a new folder")}))),r.addFactory(O,"uploader",(e=>new P.Uploader({model:u.model,translator:n}))),r.addFactory(O,"filename-searcher",(e=>{const t=(0,R.FilenameSearcher)({updateFilter:(e,t)=>{u.model.setFilter((t=>e(t.name.toLowerCase())))},useFuzzyFilter:!0,placeholder:d.__("Filter files by name"),forceRefresh:!1});return t.addClass("jp-FileBrowser-filterBox"),t}))),e.shell.add(u,"left",{type:"FileSystemAccess"})}},A=W;var K=n(90487),V=n.n(K),$=n(29340);V()($.Z,{insert:"head",singleton:!1}),$.Z.locals;const H=new s.Token("@datalayer/run:plugin"),B={id:"@datalayer/docmanager-extension:manager",description:"Provides the document manager.",provides:i.IDocumentManager,requires:[i.IDocumentWidgetOpener,a.ISessionContextDialogs],optional:[o.ITranslator,r.ILabStatus,r.JupyterLab.IInfo],activate:(e,t,n,s,r,a)=>{const{docRegistry:i}=e,l=s??o.nullTranslator,c=e.restored.then((()=>{}));return new k({registry:i,manager:e.serviceManager,opener:t,when:c,setBusy:(r&&(()=>r.setBusy()))??void 0,sessionDialogs:n,translator:l??o.nullTranslator,isConnectedCallback:()=>!a||a.isConnected})}},U={id:"@datalayer/apputils-extension:sessionDialogs",description:"Provides the session context dialogs.",provides:a.ISessionContextDialogs,optional:[o.ITranslator],autoStart:!0,activate:async(e,t)=>{const n=new S(e.serviceManager);return e.serviceManager=n,new C({translator:t??o.nullTranslator},n)}};var J;!function(e){e.create="create-datalayer-run-widget"}(J||(J={}));const Y={id:"@datalayer/run:plugin",autoStart:!0,requires:[a.ICommandPalette],optional:[l.ISettingRegistry,c.ILauncher,r.ILayoutRestorer],provides:H,activate:(e,t,n,s,r)=>{const{commands:i}=e,o=J.create,l=new a.WidgetTracker({namespace:"datalayer-run"});r&&r.restore(l,{command:o,name:()=>"datalayer-run"});const c={};i.addCommand(o,{caption:"Show Datalayer Run",label:"Datalayer Run",icon:d,execute:()=>{const t=new Z(e,c),n=new a.MainAreaWidget({content:t});n.title.label="Datalayer Run",n.title.icon=d,e.shell.add(n,"main")}});const h="Datalayer";return t.addItem({command:o,category:h}),s&&s.add({command:o,category:h,rank:1.1}),n&&n.load(Y.id).then((e=>{console.log("@datalayer/run settings loaded:",e.composite)})).catch((e=>{console.error("Failed to load settings for @datalayer/run.",e)})),(0,M.v)("config").then((e=>{console.log(e)})).catch((e=>{console.error(`Error while accessing the jupyter server datalayer_run extension.\n${e}`)})),console.log("JupyterLab plugin @datalayer/run:plugin is activated."),c}},q=[Y,B,U,A]},29018:(e,t,n)=>{n.d(t,{SX:()=>i,iy:()=>r,p0:()=>a});var s=n(32790);const r=(e,t,n)=>s.ServerConnection.makeSettings({baseUrl:e,wsUrl:t,token:n,appendToken:!0,init:{mode:"cors",credentials:"include",cache:"no-cache"}}),a=e=>new s.ServiceManager({serverSettings:e}),i=async(e,t,n,s)=>await e.sessions.startNew({name:s,path:n,type:"notebook",kernel:{name:t}},{kernelConnectionOptions:{handleComms:!0}})},9295:(e,t,n)=>{n.d(t,{Dl:()=>i,H$:()=>o,KJ:()=>h,LI:()=>c,Z5:()=>d,j_:()=>l,mh:()=>a});var s=n(5987);let r={jupyterServerHttpUrl:"",jupyterServerWsUrl:"",jupyterToken:"",insideJupyterLab:!1,insideJupyterHub:!1};const a=e=>{r.jupyterServerHttpUrl=e},i=()=>r.jupyterServerHttpUrl,o=e=>{r.jupyterServerWsUrl=e},l=()=>r.jupyterServerWsUrl,c=e=>{r.jupyterToken=e},d=()=>r.jupyterToken,h=e=>{const{lite:t,jupyterServerHttpUrl:n,jupyterServerWsUrl:h,collaborative:u,terminals:m,jupyterToken:p}=e,g=document.getElementById("datalayer-config-data");if(g)r=JSON.parse(g.textContent||""),a(n??r.jupyterServerHttpUrl??location.protocol+"//"+location.host+"/api/jupyter"),o(h??r.jupyterServerWsUrl??location.protocol.replace("http","ws")+"//"+location.host+"/api/jupyter"),c(p??r.jupyterToken??"");else{const e=document.getElementById("jupyter-config-data");if(e){const t=JSON.parse(e.textContent||"");a(n??location.protocol+"//"+location.host+t.baseUrl),o(h??"https"===location.protocol?"wss://"+location.host:"ws://"+location.host+t.baseUrl),c(p??t.token),r.insideJupyterLab="JupyterLab"===t.appName}else a(n??location.protocol+"//"+location.host+"/api/jupyter"),o(h??location.protocol.replace("http","ws")+"//"+location.host+"/api/jupyter"),c(p??"")}return t&&(a(location.protocol+"//"+location.host),o("https"===location.protocol?"wss://"+location.host:"ws://"+location.host)),s.PageConfig.setOption("baseUrl",i()),s.PageConfig.setOption("wsUrl",l()),s.PageConfig.setOption("token",d()),s.PageConfig.setOption("collaborative",String(u)),s.PageConfig.setOption("disableRTC",String(!u)),s.PageConfig.setOption("terminalsAvailable",String(m)),s.PageConfig.setOption("mathjaxUrl","https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"),s.PageConfig.setOption("mathjaxConfig","TeX-AMS_CHTML-full,Safe"),r.insideJupyterHub=""!==s.PageConfig.getOption("hubHost"),r}}}]);