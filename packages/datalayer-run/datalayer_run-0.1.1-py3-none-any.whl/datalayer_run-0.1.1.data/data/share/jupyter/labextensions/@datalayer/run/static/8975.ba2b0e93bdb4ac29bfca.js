/*! For license information please see 8975.ba2b0e93bdb4ac29bfca.js.LICENSE.txt */
(()=>{"use strict";var t={8975:()=>{const t=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),s=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),i=Symbol("Comlink.thrown"),n=t=>"object"==typeof t&&null!==t||"function"==typeof t,r=new Map([["proxy",{canHandle:e=>n(e)&&e[t],serialize(t){const{port1:e,port2:s}=new MessageChannel;return o(t,e),[s,[s]]},deserialize:t=>(t.start(),d(t,[],undefined))}],["throw",{canHandle:t=>n(t)&&i in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function o(e,s=globalThis,n=["*"]){s.addEventListener("message",(function r(p){if(!p||!p.data)return;if(!function(t,e){for(const s of t){if(e===s||"*"===s)return!0;if(s instanceof RegExp&&s.test(e))return!0}return!1}(n,p.origin))return void console.warn(`Invalid origin '${p.origin}' for comlink proxy`);const{id:c,type:u,path:h}=Object.assign({path:[]},p.data),d=(p.data.argumentList||[]).map(f);let m;try{const s=h.slice(0,-1).reduce(((t,e)=>t[e]),e),a=h.reduce(((t,e)=>t[e]),e);switch(u){case"GET":m=a;break;case"SET":s[h.slice(-1)[0]]=f(p.data.value),m=!0;break;case"APPLY":m=a.apply(s,d);break;case"CONSTRUCT":m=function(e){return Object.assign(e,{[t]:!0})}(new a(...d));break;case"ENDPOINT":{const{port1:t,port2:s}=new MessageChannel;o(e,s),m=function(t,e){return _.set(t,e),t}(t,[t])}break;case"RELEASE":m=void 0;break;default:return}}catch(t){m={value:t,[i]:0}}Promise.resolve(m).catch((t=>({value:t,[i]:0}))).then((t=>{const[i,n]=y(t);s.postMessage(Object.assign(Object.assign({},i),{id:c}),n),"RELEASE"===u&&(s.removeEventListener("message",r),l(s),a in e&&"function"==typeof e[a]&&e[a]())})).catch((t=>{const[e,a]=y({value:new TypeError("Unserializable return value"),[i]:0});s.postMessage(Object.assign(Object.assign({},e),{id:c}),a)}))})),s.start&&s.start()}function l(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function p(t){if(t)throw new Error("Proxy has been released and is not useable")}function c(t){return g(t,{type:"RELEASE"}).then((()=>{l(t)}))}const u=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(u.get(t)||0)-1;u.set(t,e),0===e&&c(t)}));function d(t,a=[],i=function(){}){let n=!1;const r=new Proxy(i,{get(e,i){if(p(n),i===s)return()=>{!function(t){h&&h.unregister(t)}(r),c(t),n=!0};if("then"===i){if(0===a.length)return{then:()=>r};const e=g(t,{type:"GET",path:a.map((t=>t.toString()))}).then(f);return e.then.bind(e)}return d(t,[...a,i])},set(e,s,i){p(n);const[r,o]=y(i);return g(t,{type:"SET",path:[...a,s].map((t=>t.toString())),value:r},o).then(f)},apply(s,i,r){p(n);const o=a[a.length-1];if(o===e)return g(t,{type:"ENDPOINT"}).then(f);if("bind"===o)return d(t,a.slice(0,-1));const[l,c]=m(r);return g(t,{type:"APPLY",path:a.map((t=>t.toString())),argumentList:l},c).then(f)},construct(e,s){p(n);const[i,r]=m(s);return g(t,{type:"CONSTRUCT",path:a.map((t=>t.toString())),argumentList:i},r).then(f)}});return function(t,e){const s=(u.get(e)||0)+1;u.set(e,s),h&&h.register(t,e,t)}(r,t),r}function m(t){const e=t.map(y);return[e.map((t=>t[0])),(s=e.map((t=>t[1])),Array.prototype.concat.apply([],s))];var s}const _=new WeakMap;function y(t){for(const[e,s]of r)if(s.canHandle(t)){const[a,i]=s.serialize(t);return[{type:"HANDLER",name:e,value:a},i]}return[{type:"RAW",value:t},_.get(t)||[]]}function f(t){switch(t.type){case"HANDLER":return r.get(t.name).deserialize(t.value);case"RAW":return t.value}}function g(t,e,s){return new Promise((a=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(s){s.data&&s.data.id&&s.data.id===i&&(t.removeEventListener("message",e),a(s.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),s)}))}o(new class{constructor(){this._initialized=new Promise(((t,e)=>{this._initializer={resolve:t,reject:e}}))}async initialize(t){if(this._options=t,t.location.includes(":")){const e=t.location.split(":");this._driveName=e[0],this._localPath=e[1]}else this._driveName="",this._localPath=t.location;await this.initRuntime(t),await this.initPackageManager(t),await this.initKernel(t),await this.initGlobals(t),this._initializer?.resolve()}async initRuntime(t){const{pyodideUrl:e,indexUrl:s}=t;if(e.endsWith(".mjs")){const t=await import(e);this._pyodide=await t.loadPyodide({indexURL:s})}else importScripts(e),this._pyodide=await self.loadPyodide({indexURL:s})}async initPackageManager(t){if(!this._options)throw new Error("Uninitialized");const{pipliteWheelUrl:e,disablePyPIFallback:s,pipliteUrls:a}=this._options;await this._pyodide.loadPackage(["micropip"]),await this._pyodide.runPythonAsync(`\n      import micropip\n      await micropip.install('${e}', keep_going=True)\n      import piplite.piplite\n      piplite.piplite._PIPLITE_DISABLE_PYPI = ${s?"True":"False"}\n      piplite.piplite._PIPLITE_URLS = ${JSON.stringify(a)}\n    `)}async initKernel(t){await this._pyodide.runPythonAsync("\n      await piplite.install(['matplotlib', 'ipykernel'], keep_going=True);\n      await piplite.install(['pyolite'], keep_going=True);\n      await piplite.install(['ipython'], keep_going=True);\n      import pyolite\n    "),t.mountDrive&&this._localPath&&await this._pyodide.runPythonAsync(`\n        import os;\n        os.chdir("${this._localPath}");\n      `)}async initGlobals(t){const{globals:e}=this._pyodide;this._kernel=e.get("pyolite").kernel_instance.copy(),this._stdout_stream=e.get("pyolite").stdout_stream.copy(),this._stderr_stream=e.get("pyolite").stderr_stream.copy(),this._interpreter=this._kernel.interpreter.copy(),this._interpreter.send_comm=this.sendComm.bind(this)}mapToObject(t){const e=t instanceof Array?[]:{};return t.forEach(((t,s)=>{e[s]=t instanceof Map||t instanceof Array?this.mapToObject(t):t})),e}formatResult(t){if(!this._pyodide.isPyProxy(t))return t;const e=t.toJs();return this.mapToObject(e)}async setup(t){await this._initialized,this._kernel._parent_header=this._pyodide.toPy(t)}async execute(t,e){await this.setup(e);const s=(t,e)=>{const s={name:this.formatResult(t),text:this.formatResult(e)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:s,type:"stream"})};this._stdout_stream.publish_stream_callback=s,this._stderr_stream.publish_stream_callback=s,this._interpreter.display_pub.clear_output_callback=t=>{const e={wait:this.formatResult(t)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:e,type:"clear_output"})},this._interpreter.display_pub.display_data_callback=(t,e,s)=>{const a={data:this.formatResult(t),metadata:this.formatResult(e),transient:this.formatResult(s)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"display_data"})},this._interpreter.display_pub.update_display_data_callback=(t,e,s)=>{const a={data:this.formatResult(t),metadata:this.formatResult(e),transient:this.formatResult(s)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"update_display_data"})},this._interpreter.displayhook.publish_execution_result=(t,e,s)=>{const a={execution_count:t,data:this.formatResult(e),metadata:this.formatResult(s)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"execute_result"})},this._interpreter.input=this.input.bind(this),this._interpreter.getpass=this.getpass.bind(this);const a=await this._kernel.run(t.code),i=this.formatResult(a);return"error"===i.status&&((t,e,s)=>{const a={ename:t,evalue:e,traceback:s};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"execute_error"})})(i.ename,i.evalue,i.traceback),i}async complete(t,e){await this.setup(e);const s=this._kernel.complete(t.code,t.cursor_pos);return this.formatResult(s)}async inspect(t,e){await this.setup(e);const s=this._kernel.inspect(t.code,t.cursor_pos,t.detail_level);return this.formatResult(s)}async isComplete(t,e){await this.setup(e);const s=this._kernel.is_complete(t.code);return this.formatResult(s)}async commInfo(t,e){await this.setup(e);const s=this._kernel.comm_info(t.target_name);return{comms:this.formatResult(s),status:"ok"}}async commOpen(t,e){await this.setup(e);const s=this._kernel.comm_manager.comm_open(this._pyodide.toPy(t));return this.formatResult(s)}async commMsg(t,e){await this.setup(e);const s=this._kernel.comm_manager.comm_msg(this._pyodide.toPy(t));return this.formatResult(s)}async commClose(t,e){await this.setup(e);const s=this._kernel.comm_manager.comm_close(this._pyodide.toPy(t));return this.formatResult(s)}async inputReply(t,e){await this.setup(e),this._resolveInputReply(t)}async sendInputRequest(t,e){const s={prompt:t,password:e};postMessage({type:"input_request",parentHeader:this.formatResult(this._kernel._parent_header).header,content:s})}async getpass(t){t=void 0===t?"":t,await this.sendInputRequest(t,!0);const e=new Promise((t=>{this._resolveInputReply=t}));return(await e).value}async input(t){t=void 0===t?"":t,await this.sendInputRequest(t,!1);const e=new Promise((t=>{this._resolveInputReply=t}));return(await e).value}async sendComm(t,e,s,a,i){postMessage({type:t,content:this.formatResult(e),metadata:this.formatResult(s),ident:this.formatResult(a),buffers:this.formatResult(i),parentHeader:this.formatResult(this._kernel._parent_header).header})}_options=null;_initialized;_initializer=null;_localPath="";_driveName="";_pyodide;_kernel;_interpreter;_stdout_stream;_stderr_stream;_resolveInputReply})}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,s),n.exports}s.m=t,s.c=e,s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{s.S={};var t={},e={};s.I=(a,i)=>{i||(i=[]);var n=e[a];if(n||(n=e[a]={}),!(i.indexOf(n)>=0)){if(i.push(n),t[a])return t[a];s.o(s.S,a)||(s.S[a]={}),s.S[a];var r=[];return t[a]=r.length?Promise.all(r).then((()=>t[a]=1)):1}}})(),s(8975)})();